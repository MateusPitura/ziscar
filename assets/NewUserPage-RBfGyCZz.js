import{r as i,j as n,u as x,b as E,c as S,i as U,d as g,O as h,e as v}from"./index-CnY9f91V.js";import{U as C}from"./UserForm-CKzUmBwb.js";import{p as y}from"./parseAddressToCreate-D-7d1H4W.js";import{u as P}from"./useIsFetching-D0Me2krs.js";import"./schemas-CZyi_FYc.js";import"./useDialog-DgUnmKfd.js";import"./Choice-C2iLnYQh.js";import"./AddressFields-Cz_sqXof.js";import"./FieldArray-Ckm8lv6T.js";import"./Section-C_3Epz3l.js";import"./Select-7V9bPDz1.js";import"./PageHeader-nhaYMwqU.js";import"./index-BEfG4sVV.js";import"./index-8LNUc8ZP.js";const R=i.createContext(null);function b({children:s}){const[e,t]=i.useState("");function r(o){t(o)}const a=i.useMemo(()=>({example:e,handleExample:r}),[e]);return n.jsx(R.Provider,{value:a,children:s})}function z({contextHelper:s}){const{safeFetch:e}=x(),{showSuccessSnackbar:t}=E(),r=P({queryKey:["cepApi"]}),a=S(),o=U();async function u(d){const{address:p,...l}=d,f=y({address:p});await e(`${v}/user`,{method:"POST",body:{...l,address:f},resource:"USERS",action:"CREATE"})}const{mutate:c,isPending:m}=g({mutationFn:u,onSuccess:()=>{t({title:"Um email será enviado",description:"Confira também a caixa de spam"}),o("/users"),a.invalidateQueries({queryKey:["users"]})}});return n.jsx(b,{children:n.jsx(C,{defaultValues:h,onSubmit:c,isPending:m||!!r,headerTitle:"Novo usuário",resource:"USERS",action:"CREATE",allowEditRole:!0,contextHelper:s})})}export{z as default};
