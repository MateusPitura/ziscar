import{f as p,u as A,b as y,c as v,k as F,h as x,d as g,r as V,j as e,S,g as o,e as j,F as E,l as C,m as P}from"./index-DLLA1f-v.js";import{F as b}from"./schemas-Bhi0Dh6I.js";import{P as N}from"./FieldArray-BBhN6Zd9.js";import{P as T}from"./PageHeader-Bs9TDp09.js";import{a as k}from"./index-ORUOFCuk.js";import{s as B}from"./selectVehicleInfo-ycdfHdPz.js";import{V as D}from"./VehicleTabs-Dq2mxbOQ.js";import"./useButtonState-3b0McXTU.js";import"./dialog-BH6A_dKB.js";import"./index-2Ad1AATz.js";import"./Tabs-D35p2k1r.js";import"./Section-BgbGHRg0.js";import"./PaymentForm-0P3bM2lj.js";import"./DataField-whfLL2N4.js";import"./Choice-BxW3kVCA.js";import"./ColorPreview-BJSXhAOg.js";import"./selectStoresInfo-D_L-tg5X.js";function R(){const t=p(),{safeFetch:c}=A(),{showSuccessSnackbar:l}=y(),s=v(),{vehicleId:a}=F();async function n(){return{payment:{purchaseDate:"2023-01-01",paidTo:"Fulano de Tal"},vehicle:{id:1,modelName:"Fusca",announcedPrice:8e6,plateNumber:"ABC1234",modelYear:1970,status:P.DELIVERED,archivedAt:void 0,brand:{id:10,name:"Volkswagen"},store:{id:1,name:"Loja 1"},category:C.CAR,color:"#FFFFFF",chassiNumber:"AAAAAAAAAAAAAAAAA",commissionValue:1e3,fuelType:E.FLEX,kilometers:1e3,minimumPrice:8e6,yearOfManufacture:1970,characteristics:["Direção hidráulica","Janelas elétricas","Ar condicionado","Piloto automático","Vidros elétricos","Freios ABS"]}}}const{data:i,isFetching:u}=x({queryKey:["vehicle",a],queryFn:n,select:B});async function m(f){await c(`${j}/vehicles/${a}`,{method:"PATCH",body:f.vehicle,resource:"VEHICLES",action:"UPDATE"})}const{mutate:d,isPending:h,isSuccess:r}=g({mutationFn:m,onSuccess:()=>{l({title:`Veículo ${i==null?void 0:i.vehicle.modelName} atualizado com sucesso`}),t("/vehicles"),s.invalidateQueries({queryKey:["vehicles"]})}});return V.useEffect(()=>()=>{r&&s.invalidateQueries({queryKey:["vehicle",a]})},[r,s,a]),u?e.jsx("div",{className:"flex justify-center items-center h-full w-full",children:e.jsx(S,{})}):i&&e.jsx("div",{className:"flex flex-col gap-4 w-full",children:e.jsxs(b,{onSubmit:d,className:"flex-1 flex flex-col gap-4",schema:k,onlyDirty:!0,defaultValues:i,children:[e.jsx(T,{title:"Alterar veículo"}),e.jsx(D,{isEdit:!0}),e.jsxs(N,{dirty:!0,primaryBtnState:h?"loading":void 0,children:[e.jsx(o,{color:"lightBlue",iconRight:"Save",label:"Salvar"}),e.jsx(o,{color:"red",iconRight:"Close",label:"Cancelar",onClick:()=>t("/vehicles")})]})]})})}function W(){return e.jsx(R,{})}export{W as default};
