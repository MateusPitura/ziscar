import{r as i,j as r,h as f,i as x,k as g,g as h,l as E,t as S,m as U}from"./index-0Nt7NBOD.js";import{u as C}from"./useIsFetching-CGrR-esr.js";import{U as v}from"./UserForm-bkoFMsSr.js";import"./schemas-CDPgOUHG.js";import"./Choice-DcDSo3m0.js";import"./PageFooter-CS6OcIB9.js";import"./Dialog-aYrjmFvu.js";const y=i.createContext(null);function P({children:e}){const[t,s]=i.useState("");function n(o){s(o)}const a=i.useMemo(()=>({example:t,handleExample:n}),[t]);return r.jsx(y.Provider,{value:a,children:e})}function R({address:e}){if(e!=null&&e.length&&e.length>0){const{state:t,...s}=e[0];return s}else return null}function w(){const{safeFetch:e}=f(),{showSuccessSnackbar:t}=x(),s=C({queryKey:["cepApi"]}),n=g(),a=h();async function o(l){const{address:m,...p}=l,d=R({address:m});await e(`${U}/user`,{method:"POST",body:{...p,address:d},resource:"USERS",action:"CREATE"})}const{mutate:u,isPending:c}=E({mutationFn:o,onSuccess:()=>{t({title:"Um email será enviado",description:"Confira também a caixa de spam"}),a("/users"),n.invalidateQueries({queryKey:["users"]})}});return r.jsx(v,{defaultValues:S,onSubmit:u,isPending:c||!!s,headerTitle:"Novo usuário",resource:"USERS",action:"CREATE",allowEditRole:!0})}function q(){return r.jsx(P,{children:r.jsx(w,{})})}export{q as default};
