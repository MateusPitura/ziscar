import{u as f,b as S,d as b,j as e,e as y,i as C,P as D,Q as v,l as d}from"./index-BZf2WeKU.js";import{F as B,I as o}from"./schemas-uOsodSYq.js";import{C as m}from"./Choice-DWzWARJn.js";import{A as F}from"./AddressFields-B9iB5g47.js";import{P}from"./PageHeader-BhNPn7vC.js";import{S as a}from"./Section-Bf1M-jgo.js";import{D as l,b as R}from"./useDialog-Q2f17nT0.js";import{a as A}from"./index-Uulw0UN3.js";import{P as E}from"./FieldArray-F9VSLlp9.js";function k({...s}){const{safeFetch:t}=f(),{showSuccessSnackbar:i}=S();async function n(){await t(`${y}/auth/request-change-password`,{method:"POST"})}const{mutate:r,isPending:c}=b({mutationFn:n,onSuccess:()=>{i({title:"Um email será enviado",description:"Confira também a caixa de spam"}),s.closeDialog()}});return e.jsxs(l,{...s,children:[e.jsx(l.Header,{title:"Alteração de senha"}),e.jsx(l.Body,{children:"Caso deseje alterar a senha, clique no botão abaixo e siga as instruções enviadas para seu email"}),e.jsx(l.Footer,{labelSecondaryBtn:"Cancelar",onClickPrimaryBtn:r,labelPrimaryBtn:"Solicitar alteração",onClickSecondaryBtn:s.closeDialog,primaryBtnState:c?"loading":void 0})]})}function G({defaultValues:s,onSubmit:t,isPending:i,headerTitle:n,isEdit:r=!1,resource:c,action:x,allowEditRole:h=!1,allowChangePassword:j=!1,contextHelper:p}){const g=C(),u=R();return e.jsxs(e.Fragment,{children:[e.jsx(k,{...u}),e.jsx("div",{className:"flex flex-col gap-4 w-full",children:e.jsxs(B,{schema:A,defaultValues:s,onSubmit:t,className:"gap-4 flex flex-col flex-1",onlyDirty:r,children:[e.jsx(P,{title:n,contextHelper:p}),e.jsx("div",{className:"flex justify-center flex-1",children:e.jsxs(a,{children:[e.jsxs(a.Group,{children:[e.jsx(a.Header,{title:"Dados"}),e.jsxs(a.Body,{children:[e.jsx(o,{name:"fullName",label:"Nome completo",required:!0,autoFocus:!0}),e.jsx(o,{name:"email",label:"Email",required:!0,disabled:r,type:"email"}),e.jsx(o,{name:"phone",label:"Celular",mask:"phone",maxLength:15,type:"tel"}),e.jsx(o,{name:"cpf",label:"CPF",mask:"cpf",maxLength:14})]})]}),e.jsx(F,{}),h&&e.jsxs(a.Group,{children:[e.jsx(a.Header,{title:"Categoria"}),e.jsx(a.Body,{children:e.jsxs(m,{children:[e.jsx(m.Radio,{name:"roleId",label:"Administrador",value:String(D)}),e.jsx(m.Radio,{name:"roleId",label:"Vendedor",value:String(v)})]})})]}),j&&e.jsxs(a.Group,{children:[e.jsx(a.Header,{title:"Segurança"}),e.jsx(a.Body,{children:e.jsx(d,{"data-cy":"request-change-password-button",label:"Alterar senha",onClick:()=>u.openDialog(),tooltipMessage:"Alterar senha"})})]})]})}),e.jsxs(E,{primaryBtnState:i?"loading":void 0,dirty:!0,children:[e.jsx(d,{color:"lightBlue",iconRight:"Save",label:"Salvar",resource:c,action:x,tooltipMessage:"Salvar cadastro"}),e.jsx(d,{color:"red",iconRight:"Close",label:"Cancelar",onClick:()=>g("/users"),tooltipMessage:"Cancelar cadastro"})]})]})})]})}export{G as U};
