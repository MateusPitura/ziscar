import{a,i as x,r as E,u as j,o as C,f as V,j as e,S as v,l as S,e as b}from"./index-BaodxefT.js";import{T as i}from"./ColorPreview-CRDktiuw.js";import{P as A}from"./PageHeader-BvWMz3kB.js";import{S as t}from"./Section-Cn7yCL_l.js";import{f as y}from"./formatVehicleCharacteristics-BEECkIz-.js";import{V as D,C as L}from"./VehicleData-BKuwGwlb.js";import"./useDialog-B00w_pfZ.js";import"./DataField-ClarmWOb.js";function N({customer:c,vehicle:s}){return{vehicle:{...s,kilometers:a(s.kilometers,"number")??"",plateNumber:a(s.plateNumber,"plateNumber")??"",announcedPrice:a(s.announcedPrice,"money")??"",minimumPrice:a(s.minimumPrice,"money")??"",commissionValue:a(s.commissionValue,"money")??"",chassiNumber:a(s.chassiNumber,"chassi")??""},customer:{...c,cpf:a(c.cpf,"cpf")??"",phone:a(c.phone,"phone")??""}}}const T=!1;function F({contextHelper:c}){const s=x(),[r,n]=E.useState("VEHICLE"),{safeFetch:m}=j(),{vehicleSaleId:l}=C();async function h(){const f=await m(`${b}/vehicles/sale/${l}`,{resource:"VEHICLES",action:"READ"}),{customerSnapshot:p,vehicleSnapshot:u}=f;return{customer:p,vehicle:{...u,vehicleCharacteristicValues:y({vehicleCharacteristicValues:u.vehicleCharacteristicValues})}}}const{data:o,isFetching:d}=V({queryKey:["vehicle-sale",l],queryFn:h,select:N});return d?e.jsx("div",{className:"flex justify-center items-center h-full w-full",children:e.jsx(v,{})}):o&&e.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[e.jsx(A,{title:"Detalhes da Venda",contextHelper:c,children:e.jsx(S,{label:"Voltar",iconLeft:"ArrowBack",onClick:()=>s("/accounts-receivable"),resource:"ACCOUNTS_RECEIVABLE",action:"READ",variant:"quaternary","data-cy":"back-vehicle-sale-button",tooltipMessage:"Página anterior"})}),e.jsxs(i,{children:[e.jsxs(i.Header,{children:[e.jsx(i.Tab,{isActive:r==="VEHICLE",title:"Veículo",onClick:()=>n("VEHICLE"),resource:"VEHICLE_SALE",action:"READ"}),e.jsx(i.Tab,{isActive:r==="CUSTOMER",title:"Cliente",onClick:()=>n("CUSTOMER"),resource:"VEHICLE_SALE",action:"READ"}),T]}),e.jsxs(i.Body,{children:[e.jsx(i.Section,{isActive:r==="VEHICLE",children:e.jsx(t,{children:e.jsxs(t.Group,{children:[e.jsx(t.Header,{title:"Dados do veículo"}),e.jsx(t.Body,{className:"grid-cols-3",children:e.jsx(D,{vehicleData:o.vehicle})})]})})}),e.jsx(i.Section,{isActive:r==="CUSTOMER",children:e.jsx(t,{children:e.jsxs(t.Group,{children:[e.jsx(t.Header,{title:"Dados do cliente"}),e.jsx(t.Body,{className:"grid-cols-2",children:e.jsx(L,{customerData:o.customer})})]})})}),e.jsx(i.Section,{isActive:r==="PROFIT"})]})]})]})}export{F as default};
