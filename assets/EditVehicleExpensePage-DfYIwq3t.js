import{u as d,b as f,f as x,c as h,l as g,t as v,h as S,d as V,r as C,j as n,S as b,E as P,e as j,y as A}from"./index-CDuUmDit.js";import{E as q}from"./ExpenseForm-DZM9Vchc.js";import"./schemas-CxmGnStq.js";import"./useButtonState-DJFFoANO.js";import"./FieldArray-Dw98_Trr.js";import"./dialog-3JPZnGOG.js";import"./Section-Dx5LZFIe.js";import"./PaymentForm-BT9tu9Xl.js";import"./DataField-B0EHyytN.js";import"./VehicleExpenseHeader-HhexgJd-.js";import"./PageHeader-B5SIBKuZ.js";import"./selectVehicleInfo-DaknI4Z7.js";import"./index-i8uBxv0L.js";import"./index-Bov_tmPN.js";function F(s){return{payment:{category:s.category,competencyDate:s.competencyDate,observations:s.observations,upfront:[],installment:null}}}function D(){const{safeFetch:s}=d(),{showSuccessSnackbar:c}=f(),i=x(),a=h(),{expenseId:e}=g(),{pathname:o}=v();async function u(){return{category:A.IPVA,competencyDate:"2025-01-01",id:1,observations:"Seu Jorge",totalValue:"100000",archivedAt:void 0}}const{data:t,isFetching:l}=S({queryKey:["vehicle-expense",e],queryFn:u,select:F});async function p(E){await s(`${j}/vehicle-expense/${e}`,{method:"PATCH",body:E,resource:"VEHICLE_EXPENSE",action:"UPDATE"})}const{mutate:m,isPending:y,isSuccess:r}=V({mutationFn:p,onSuccess:async()=>{t!=null&&t.payment.category&&c({title:`Gasto de ${P[t.payment.category]} atualizado com sucesso`}),a.invalidateQueries({queryKey:["vehicle-expenses"]}),a.invalidateQueries({queryKey:["accounts-payable"]}),i(o.replace(`/edit/${e}`,""))}});return C.useEffect(()=>()=>{r&&a.invalidateQueries({queryKey:["vehicle-expense",e]})},[r,a,e]),l?n.jsx("div",{className:"flex justify-center items-center h-full w-full",children:n.jsx(b,{})}):t&&n.jsx(q,{defaultValues:t,onSubmit:m,isPending:y,headerTitle:"Alterar Gasto do VeÃ­culo",isEdit:!0,resource:"VEHICLE_EXPENSE",action:"UPDATE",onClose:()=>i(o.replace(`/edit/${e}`,""))})}function X(){return n.jsx(D,{})}export{X as default};
