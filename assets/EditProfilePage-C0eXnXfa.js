import{r as u,j as r,a as l,u as g,b as E,c as S,f as j,d as C,S as F,e as d}from"./index-DmwSkqVz.js";import{U as w}from"./UserForm-GlHKO_1M.js";import{s as A,p as v}from"./selectAddressInfo-CNJdWtNC.js";import{u as b}from"./useIsFetching-awalAWhd.js";import"./schemas-CDh-Ls0x.js";import"./useDialog-B87cicjl.js";import"./Choice-D6EJHI4O.js";import"./AddressFields-vz8v9WNE.js";import"./FieldArray-CccZHlDo.js";import"./Section-VDDmVTvE.js";import"./Select-BCdmGCll.js";import"./PageHeader-CS70jJr4.js";import"./index-a2UIgC7o.js";import"./index-fjEarVAD.js";const q=u.createContext(null);function U({children:e}){const[s,o]=u.useState("");function i(a){o(a)}const n=u.useMemo(()=>({example:s,handleExample:i}),[s]);return r.jsx(q.Provider,{value:n,children:e})}function I(e){return{fullName:e.fullName,email:e.email,phone:l(e.phone,"phone")??"",cpf:l(e.cpf,"cpf")??"",address:A(e.address)}}function D({contextHelper:e}){const{safeFetch:s}=g(),{showSuccessSnackbar:o}=E(),i=S(),n=b({queryKey:["cepApi"]});async function a(){return await s(`${d}/profile`)}const{data:t,isFetching:p}=j({queryKey:["profile"],queryFn:a,select:I});async function f(y){const{address:P,...x}=y,c=v({newAddress:P,oldAddress:t==null?void 0:t.address});await s(`${d}/profile`,{method:"PATCH",body:{...x,...c&&{address:c}}})}const{mutate:m,isPending:h}=C({mutationFn:f,onSuccess:async()=>{o({title:"Perfil atualizado com sucesso"}),i.invalidateQueries({queryKey:["profile"]})}});return p?r.jsx("div",{className:"flex justify-center items-center h-full w-full",children:r.jsx(F,{})}):r.jsx(U,{children:t&&r.jsx(w,{headerTitle:"Editar minha conta",defaultValues:t,onSubmit:m,isPending:h||!!n,isEdit:!0,allowChangePassword:!0,contextHelper:e})})}export{D as default};
