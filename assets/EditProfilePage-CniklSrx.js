import{r as a,j as t,a as c,u as x,b as g,c as E,f as j,d as C,S,e as l}from"./index-CrVTpVTI.js";import{U as F}from"./UserForm-C0yrGMfq.js";import{u as w}from"./useIsFetching-Dh2N-bBa.js";import{s as A,p as v}from"./parseAddressToUpdate-D-oUqR3S.js";import"./schemas-B7gcU9vp.js";import"./useButtonState-C7TXS9Jx.js";import"./Choice-LKCp7m0f.js";import"./AddressFields-DlZGQI2J.js";import"./FieldArray-DswNorv6.js";import"./Select-CB-6jpCF.js";import"./dialog-Ct9-qcrh.js";import"./PageHeader-DARJqnt5.js";import"./Section-DVwlB0L5.js";import"./Dialog-BHTFXl4K.js";import"./DialogContext-3LqbYYdn.js";import"./index-BEH4ThDo.js";import"./index-CLx72V5J.js";const b=a.createContext(null);function q({children:e}){const[r,o]=a.useState("");function i(s){o(s)}const n=a.useMemo(()=>({example:r,handleExample:i}),[r]);return t.jsx(b.Provider,{value:n,children:e})}function U(e){return{fullName:e.fullName,email:e.email,phone:c(e.phone,"phone")??"",cpf:c(e.cpf,"cpf")??"",address:A(e.address)}}function I(){const{safeFetch:e}=x(),{showSuccessSnackbar:r}=g(),o=E(),i=w({queryKey:["cepApi"]});async function n(){return await e(`${l}/profile`)}const{data:s,isFetching:d}=j({queryKey:["profile"],queryFn:n,select:U});async function p(P){const{address:h,...y}=P,u=v({newAddress:h,oldAddress:s==null?void 0:s.address});await e(`${l}/profile`,{method:"PATCH",body:{...y,...u&&{address:u}}})}const{mutate:m,isPending:f}=C({mutationFn:p,onSuccess:async()=>{r({title:"Perfil atualizado com sucesso"}),o.invalidateQueries({queryKey:["profile"]})}});return d?t.jsx("div",{className:"flex justify-center items-center h-full w-full",children:t.jsx(S,{})}):s&&t.jsx(F,{headerTitle:"Editar minha conta",defaultValues:s,onSubmit:m,isPending:f||!!i,isEdit:!0,allowChangePassword:!0})}function O(){return t.jsx(q,{children:t.jsx(I,{})})}export{O as default};
