import{r as c,j as e,a as v,T as g,B as C,a2 as x,h}from"./index-BC9ZHEaH.js";import{P as A}from"./PageHeader-rTjd1jJN.js";import{S as f,T as a}from"./Table-DbNoA5vL.js";import{u as d,f as S}from"./react-pdf.browser-BeusyoZX.js";import{E as F}from"./ExportButton-BOTysbEJ.js";import{a as p,F as D,u as y,I as j,b as E}from"./schemas-B-PX8buY.js";import{u as b}from"./useDialogContext-B2LTNtXj.js";import{S as P,A as N}from"./AccountStatus-ab7TJMxo.js";import{C as u}from"./Choice-BLT_7Chm.js";import"./useDialog-CBLU7LHA.js";import"./useIsFetching-BI7lTYCZ.js";const R=c.createContext(null);function V({children:t}){const[l,s]=c.useState("");function n(r){s(r)}const i=c.useMemo(()=>({example:l,handleExample:n}),[l]);return e.jsx(R.Provider,{value:i,children:t})}function I(t){const l=[];for(const s of t.data)l.push({...s,totalValue:p(s.totalValue,"money")??""});return{total:t.total,data:l}}function L({accountReceivableId:t}){const l=v();return e.jsx(g,{content:"Visualizar detalhes",children:e.jsx(C,{variant:"quaternary",iconLeft:"Visibility",onClick:()=>l(`/accounts-receivable/installments/${t}`),resource:"ACCOUNTS_RECEIVABLE",action:"READ",padding:"none","data-cy":`button-edit-accountReceivable-${t}`})})}function B(){const{accountsReceivableFilter:t,handleAccountsReceivableFilter:l}=d(),{closeDialog:s}=b();function n(i){l({page:1,...i}),s()}return e.jsx(D,{schema:P,onSubmit:n,className:"flex-1 flex flex-col",defaultValues:{startDate:(t==null?void 0:t.startDate)||"",endDate:(t==null?void 0:t.endDate)||"",overallStatus:(t==null?void 0:t.overallStatus)||"PENDING"},replaceEmptyStringToNull:!1,children:e.jsx(T,{})})}function T(){const{reset:t}=y(),{handleAccountsReceivableFilter:l}=d(),{closeDialog:s}=b();function n(){l(x),t(x),s()}return e.jsxs(e.Fragment,{children:[e.jsxs(f.Body,{className:"flex flex-col gap-4",children:[e.jsx(j,{name:"startDate",label:"Data inicial",type:"date"}),e.jsx(j,{name:"endDate",label:"Data final",type:"date"}),e.jsx(E,{label:"Status geral"}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs(u,{hideErrorLabel:!0,children:[e.jsx(u.Radio,{name:"overallStatus",label:"Pago",value:"PAID"}),e.jsx(u.Radio,{name:"overallStatus",label:"Pendente",value:"PENDING"})]})})]}),e.jsx(f.Footer,{primaryLabel:"Aplicar",secondaryLabel:"Limpar",onSecondaryCallback:n,dirty:!0})]})}const H=c.memo(B);function q(t){const l=[];for(const s of t.data)l.push({...s,totalValue:p(s.totalValue,"money")??"",overallStatus:s.overallStatus==="PAID"?"Pago":"Pendente"});return l}function G(){const{accountsReceivableFilter:t,handleAccountsReceivableFilter:l}=d();function s(o){l({page:o})}const n=c.useMemo(()=>t?S(t):"",[t]);async function i(o){return console.log("ðŸŒ  filter: ",o),{total:3,data:[{id:1,description:"Conta a receber 1",receivedFrom:"Cliente A",totalValue:"10000",overallStatus:"PENDING"},{id:2,description:"Conta a receber 2",receivedFrom:"Cliente B",totalValue:"5000",overallStatus:"PENDING"},{id:3,description:"Conta a receber 3",receivedFrom:"Cliente C",totalValue:"15000",overallStatus:"PAID"}]}}const{data:r,isFetching:m}=h({queryKey:["accounts-receivable",n],queryFn:({queryKey:o})=>i(o[1]),select:I});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-4 justify-end",children:[e.jsx(F,{fileName:"RelatÃ³rio Contas a Receber",resource:"ACCOUNTS_RECEIVABLE",queryKey:["accounts-receivable",n],queryFn:i,selectQueryFn:q,formatFilters:{endDate:"Data final",startDate:"Data inicial",overallStatus:"Status geral"},formatFiltersValues:{overallStatus:{PAID:"Pago",PENDING:"Pendente"}},formatColumns:{id:"ID",description:"DescriÃ§Ã£o",receivedFrom:"Recebido de",totalValue:"Valor total",overallStatus:"Status geral"}}),e.jsx(a.Filter,{form:e.jsx(H,{})})]}),e.jsxs(a,{children:[e.jsxs(a.Header,{children:[e.jsx(a.Head,{label:"ID"}),e.jsx(a.Head,{label:"DescriÃ§Ã£o"}),e.jsx(a.Head,{label:"Recebido de"}),e.jsx(a.Head,{label:"Valor total"}),e.jsx(a.Head,{label:"Status geral"}),e.jsx(a.Head,{action:!0})]}),e.jsx(a.Body,{isLoading:m,isEmpty:!(r!=null&&r.total),resource:"ACCOUNTS_RECEIVABLE",action:"READ",children:r==null?void 0:r.data.map(o=>e.jsxs(a.Row,{children:[e.jsx(a.Cell,{label:String(o.id)}),e.jsx(a.Cell,{label:o.description}),e.jsx(a.Cell,{label:o.receivedFrom}),e.jsx(a.Cell,{label:o.totalValue}),e.jsx(a.Cell,{label:e.jsx(N,{status:o.overallStatus})}),e.jsx(a.Action,{children:e.jsx(L,{accountReceivableId:String(o.id)})})]},o.id))}),e.jsx(a.Footer,{currentStartItem:t==null?void 0:t.page,totalItems:r==null?void 0:r.total,onClickNavigateBtn:s,isLoading:m})]})]})}function k(){return e.jsxs("div",{className:"flex flex-col gap-4 h-full w-full",children:[e.jsx(A,{title:"Contas a Receber"}),e.jsx(G,{})]})}function X(){return e.jsx(V,{children:e.jsx(k,{})})}export{X as default};
