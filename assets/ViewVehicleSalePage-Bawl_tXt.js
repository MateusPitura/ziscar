import{a,i as x,r as E,u as f,n as j,f as V,j as e,S as C,k as S,e as v}from"./index-CrVTpVTI.js";import{T as i}from"./ColorPreview-C16SKF8Q.js";import{P as b}from"./PageHeader-DARJqnt5.js";import{S as t}from"./Section-DVwlB0L5.js";import{V as A,C as y}from"./VehicleData-s1JCajyP.js";import"./useButtonState-C7TXS9Jx.js";import"./DataField-CmnNFbKB.js";function D({customer:c,vehicle:s}){return{vehicle:{...s,kilometers:a(s.kilometers,"number")??"",plateNumber:a(s.plateNumber,"plateNumber")??"",announcedPrice:a(s.announcedPrice,"money")??"",minimumPrice:a(s.minimumPrice,"money")??"",commissionValue:a(s.commissionValue,"money")??"",chassiNumber:a(s.chassiNumber,"chassi")??""},customer:{...c,cpf:a(c.cpf,"cpf")??"",phone:a(c.phone,"phone")??""}}}const N=!1;function L(){const c=x(),[s,l]=E.useState("VEHICLE"),{safeFetch:h}=f(),{vehicleSaleId:u}=j();async function d(){var m;const n=await h(`${v}/vehicles/sale/${u}`,{resource:"VEHICLES",action:"READ"});return{customer:n.customerSnapshot,vehicle:{...n.vehicleSnapshot,vehicleCharacteristicValues:(m=n.vehicleSnapshot)==null?void 0:m.vehicleCharacteristicValues.map(o=>o==null?void 0:o.characteristic)}}}const{data:r,isFetching:p}=V({queryKey:["vehicle-sale",u],queryFn:d,select:D});return p?e.jsx("div",{className:"flex justify-center items-center h-full w-full",children:e.jsx(C,{})}):r&&e.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[e.jsx(b,{title:`Detalhes "Venda Veículo ${r.vehicle.plateNumber}"`,children:e.jsx(S,{label:"Voltar",iconLeft:"ArrowBack",onClick:()=>c("/accounts-receivable"),resource:"ACCOUNTS_RECEIVABLE",action:"READ",variant:"quaternary","data-cy":"back-vehicle-sale-button"})}),e.jsxs(i,{children:[e.jsxs(i.Header,{children:[e.jsx(i.Tab,{isActive:s==="VEHICLE",title:"Veículo",onClick:()=>l("VEHICLE"),resource:"VEHICLE_SALE",action:"READ"}),e.jsx(i.Tab,{isActive:s==="CUSTOMER",title:"Cliente",onClick:()=>l("CUSTOMER"),resource:"VEHICLE_SALE",action:"READ"}),N]}),e.jsxs(i.Body,{children:[e.jsx(i.Section,{isActive:s==="VEHICLE",children:e.jsx(t,{children:e.jsxs(t.Group,{children:[e.jsx(t.Header,{title:"Dados do veículo"}),e.jsx(t.Body,{className:"grid-cols-3",children:e.jsx(A,{vehicleData:r.vehicle})})]})})}),e.jsx(i.Section,{isActive:s==="CUSTOMER",children:e.jsx(t,{children:e.jsxs(t.Group,{children:[e.jsx(t.Header,{title:"Dados do cliente"}),e.jsx(t.Body,{className:"grid-cols-2",children:e.jsx(y,{customerData:r.customer})})]})})}),e.jsx(i.Section,{isActive:s==="PROFIT"})]})]})]})}function B(){return e.jsx(L,{})}export{B as default};
