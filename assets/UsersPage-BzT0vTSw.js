import{r as c,j as e,c as E,u as K,f as Q,a as W,b as X,d as De,R as Oe,e as $e,g as Ue,h as Z,P as J,i as S,A as Y,k as ee,l as Te,S as ke,D as Be,C as Le,m as Me,n as N,o as j,X as _e,p as He,B as h,q as Ie,G as ze,s as I,t as te,v as B,w as L,x as ae,y as F,z as R,E as qe}from"./index-Cg5_u33F.js";import{L as T,P as Ge}from"./Loading-PxpjxrVh.js";import{h as Ve,R as Ke,u as Qe,F as We,a as Xe,C as oe,T as Ze,b as se,P as Je,c as ne,O as re,D as ie,d as Ye,e as et,f as le,g as ce,i as A}from"./Dialog-6TbfNU4-.js";import{u as tt,a as at,F as ot,S as st,b as nt,I as rt}from"./index-BVdG0zwh.js";import{I as it,C as y}from"./Choice-Cl54up-_.js";const lt=c.createContext(null);function ct({children:t}){const[a,o]=c.useState("");function s(r){o(r)}const n=c.useMemo(()=>({example:a,handleExample:s}),[a]);return e.jsx(lt.Provider,{value:n,children:t})}const dt=E(e.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 8c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4m-6 4c.22-.72 3.31-2 6-2 2.7 0 5.8 1.29 6 2zm-3-3v-3h3v-2H6V7H4v3H1v2h3v3z"}),"PersonAddOutlined");function ut({children:t,isLoading:a,action:o,resource:s}){const n=K(s,o);return e.jsx("div",{className:"flex gap-4 overflow-x-auto",children:n?a?e.jsx(k,{isLoading:!0}):t:e.jsx(k,{label:Q({resource:s,action:o}),value:"-"})})}function k({label:t,value:a,isLoading:o}){return e.jsxs("div",{className:"p-4 bg-light-surfaceContainerLowest rounded-md min-w-fit flex flex-col text-light-onSurface gap-4",children:[e.jsx(T,{isLoading:!!o,className:"text-body-large line-clamp-1",children:t}),e.jsx(T,{isLoading:!!o,className:"text-display-medium tabular-nums line-clamp-1",children:a})]})}const z=Object.assign(ut,{Card:k});function ft(){async function t(){return[{id:"1",label:"Total de usuários",value:"24"},{id:"2",label:"Total de vendas",value:"R$100.000,00"}]}const{data:a,isFetching:o}=W({queryKey:["usersDashboard"],queryFn:t});return e.jsx(z,{isLoading:o,resource:"USERS",action:"READ",children:a==null?void 0:a.map(s=>e.jsx(z.Card,{label:s.label,value:s.value},s.id))})}const q=E(e.jsx("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5z"}),"FileDownloadOutlined"),xt=E(e.jsx("path",{d:"M10.02 6 8.61 7.41 13.19 12l-4.58 4.59L10.02 18l6-6z"}),"NavigateNextOutlined"),pt=E(e.jsx("path",{d:"M15.61 7.41 14.2 6l-6 6 6 6 1.41-1.41L11.03 12z"}),"NavigateBeforeOutlined"),mt=E(e.jsx("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList"),ht=E(e.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreHoriz");var M="Popover",[de,xa]=$e(M,[X]),w=X(),[gt,b]=de(M),ue=t=>{const{__scopePopover:a,children:o,open:s,defaultOpen:n,onOpenChange:r,modal:i=!1}=t,l=w(a),u=c.useRef(null),[x,g]=c.useState(!1),[p=!1,m]=De({prop:s,defaultProp:n,onChange:r});return e.jsx(Oe,{...l,children:e.jsx(gt,{scope:a,contentId:Ue(),triggerRef:u,open:p,onOpenChange:m,onOpenToggle:c.useCallback(()=>m(v=>!v),[m]),hasCustomAnchor:x,onCustomAnchorAdd:c.useCallback(()=>g(!0),[]),onCustomAnchorRemove:c.useCallback(()=>g(!1),[]),modal:i,children:o})})};ue.displayName=M;var fe="PopoverAnchor",vt=c.forwardRef((t,a)=>{const{__scopePopover:o,...s}=t,n=b(fe,o),r=w(o),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=n;return c.useEffect(()=>(i(),()=>l()),[i,l]),e.jsx(Y,{...r,...s,ref:a})});vt.displayName=fe;var xe="PopoverTrigger",pe=c.forwardRef((t,a)=>{const{__scopePopover:o,...s}=t,n=b(xe,o),r=w(o),i=Z(a,n.triggerRef),l=e.jsx(J.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":je(n.open),...s,ref:i,onClick:S(t.onClick,n.onOpenToggle)});return n.hasCustomAnchor?l:e.jsx(Y,{asChild:!0,...r,children:l})});pe.displayName=xe;var _="PopoverPortal",[jt,bt]=de(_,{forceMount:void 0}),me=t=>{const{__scopePopover:a,forceMount:o,children:s,container:n}=t,r=b(_,a);return e.jsx(jt,{scope:a,forceMount:o,children:e.jsx(ee,{present:o||r.open,children:e.jsx(Te,{asChild:!0,container:n,children:s})})})};me.displayName=_;var P="PopoverContent",he=c.forwardRef((t,a)=>{const o=bt(P,t.__scopePopover),{forceMount:s=o.forceMount,...n}=t,r=b(P,t.__scopePopover);return e.jsx(ee,{present:s||r.open,children:r.modal?e.jsx(yt,{...n,ref:a}):e.jsx(Ct,{...n,ref:a})})});he.displayName=P;var yt=c.forwardRef((t,a)=>{const o=b(P,t.__scopePopover),s=c.useRef(null),n=Z(a,s),r=c.useRef(!1);return c.useEffect(()=>{const i=s.current;if(i)return Ve(i)},[]),e.jsx(Ke,{as:ke,allowPinchZoom:!0,children:e.jsx(ge,{...t,ref:n,trapFocus:o.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:S(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),r.current||(l=o.triggerRef.current)==null||l.focus()}),onPointerDownOutside:S(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,x=l.button===2||u;r.current=x},{checkForDefaultPrevented:!1}),onFocusOutside:S(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),Ct=c.forwardRef((t,a)=>{const o=b(P,t.__scopePopover),s=c.useRef(!1),n=c.useRef(!1);return e.jsx(ge,{...t,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{var i,l;(i=t.onCloseAutoFocus)==null||i.call(t,r),r.defaultPrevented||(s.current||(l=o.triggerRef.current)==null||l.focus(),r.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:r=>{var u,x;(u=t.onInteractOutside)==null||u.call(t,r),r.defaultPrevented||(s.current=!0,r.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const i=r.target;((x=o.triggerRef.current)==null?void 0:x.contains(i))&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&n.current&&r.preventDefault()}})}),ge=c.forwardRef((t,a)=>{const{__scopePopover:o,trapFocus:s,onOpenAutoFocus:n,onCloseAutoFocus:r,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:x,onInteractOutside:g,...p}=t,m=b(P,o),v=w(o);return Qe(),e.jsx(We,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:n,onUnmountAutoFocus:r,children:e.jsx(Be,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:g,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:x,onDismiss:()=>m.onOpenChange(!1),children:e.jsx(Le,{"data-state":je(m.open),role:"dialog",id:m.contentId,...v,...p,ref:a,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ve="PopoverClose",Pt=c.forwardRef((t,a)=>{const{__scopePopover:o,...s}=t,n=b(ve,o);return e.jsx(J.button,{type:"button",...s,ref:a,onClick:S(t.onClick,()=>n.onOpenChange(!1))})});Pt.displayName=ve;var Et="PopoverArrow",Nt=c.forwardRef((t,a)=>{const{__scopePopover:o,...s}=t,n=w(o);return e.jsx(Me,{...n,...s,ref:a})});Nt.displayName=Et;function je(t){return t?"open":"closed"}var St=ue,Rt=pe,wt=me,be=he;const At=St,Ft=Rt,ye=c.forwardRef(({className:t,align:a="center",sideOffset:o=4,...s},n)=>e.jsx(wt,{children:e.jsx(be,{ref:n,align:a,sideOffset:o,className:N("z-50 w-72 rounded-md border border-neutral-200 bg-white p-4 text-neutral-950 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-neutral-800 dark:bg-neutral-950 dark:text-neutral-50",t),...s})}));ye.displayName=be.displayName;function Dt({children:t}){return e.jsx(At,{children:t})}function Ot({children:t,className:a,...o}){return e.jsx(ye,{className:j("bg-light-surface",a),...o,onOpenAutoFocus:s=>s.preventDefault(),children:t})}function $t({children:t}){return e.jsx(Ft,{asChild:!0,children:t})}const U=Object.assign(Dt,{Content:Ot,Trigger:$t}),Ut=Xe,Tt=Ze,kt=oe,Bt=Je,Ce=c.forwardRef(({className:t,...a},o)=>e.jsx(re,{className:N("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a,ref:o}));Ce.displayName=re.displayName;const Lt=He("fixed z-50 gap-4 bg-white p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500 dark:bg-neutral-950",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Pe=c.forwardRef(({side:t="right",className:a,children:o,...s},n)=>e.jsxs(Bt,{children:[e.jsx(Ce,{}),e.jsxs(ne,{ref:n,className:N(Lt({side:t}),a),...s,children:[o,e.jsxs(oe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-neutral-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-neutral-100 dark:ring-offset-neutral-950 dark:focus:ring-neutral-300 dark:data-[state=open]:bg-neutral-800",children:[e.jsx(_e,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Pe.displayName=ne.displayName;const Ee=({className:t,...a})=>e.jsx("div",{className:N("flex flex-col space-y-2 text-center sm:text-left",t),...a});Ee.displayName="SheetHeader";const Ne=c.forwardRef(({className:t,...a},o)=>e.jsx(se,{ref:o,className:N("text-lg font-semibold text-neutral-950 dark:text-neutral-50",t),...a}));Ne.displayName=se.displayName;const Mt=c.forwardRef(({className:t,...a},o)=>e.jsx(ie,{ref:o,className:N("text-sm text-neutral-500 dark:text-neutral-400",t),...a}));Mt.displayName=ie.displayName;function _t({children:t,...a}){return e.jsx(Ye,{...a,children:e.jsxs(Ut,{open:a.isOpen,onOpenChange:a.handleOpen,children:[t,e.jsx(et,{})]})})}function Ht({children:t}){return e.jsx(Tt,{asChild:!0,children:t})}function It({children:t}){return e.jsx(Pe,{className:"bg-light-surfaceContainerLowest rounded-tl-md flex flex-col p-0 gap-0 justify-between",children:t})}function zt({label:t}){return e.jsx(Ee,{className:"p-6",children:e.jsx(Ne,{children:e.jsx("span",{className:"text-title-large text-light-onSurface",children:t})})})}function qt({children:t,className:a}){return e.jsx("div",{className:j("px-6 flex-1 overflow-y-auto",a),children:t})}function Gt({primaryLabel:t,secondaryLabel:a="Cancelar",onPrimaryCallback:o,onSecondaryCallback:s,className:n,dirty:r,primaryBtnState:i,secondaryBtnState:l}){const u=tt({dirty:r,buttonState:i});return e.jsxs("div",{className:j("p-6 border-t border-neutral-300 flex flex-0",n),children:[e.jsx(h,{label:t,onClick:o,type:"submit",state:u}),s?e.jsx(h,{label:a,variant:"quaternary",onClick:s,state:l}):e.jsx(kt,{asChild:!0,children:e.jsx(h,{label:a,variant:"quaternary",state:l})})]})}const C=Object.assign(_t,{Trigger:Ht,Content:It,Header:zt,Body:qt,Footer:Gt});function Vt({children:t}){return e.jsx("div",{className:"overflow-x-auto flex flex-1",children:e.jsx("div",{className:"min-w-[50rem] w-full flex flex-col",children:t})})}function H({children:t,className:a,gridColumns:o="default"}){let s=o;return o==="default"?s=10:o==="auto"&&(s=(c.Children.count(t)-2)*2+2),e.jsx("div",{className:j("p-4 grid gap-2 bg-light-surfaceContainerLowest h-[72px] items-center border-b border-neutral-300",a),style:{gridTemplateColumns:`repeat(${s}, minmax(0, 1fr))`},children:t})}function Kt({children:t,className:a,gridColumns:o}){return e.jsx(H,{className:j("bg-light-tertiaryContainer rounded-t-md border-none",a),gridColumns:o,children:t})}function Se({label:t,className:a,colSpan:o}){const s=o??2;return e.jsx("span",{className:j("text-light-onTertiaryContainer text-body-medium overflow-x-hidden",a,{"first:!col-span-1":!o}),style:{gridColumn:`span ${s} / span ${s}`},children:t})}function Qt({className:t,colSpan:a=1,children:o}){return e.jsx("div",{className:j("overflow-x-hidden flex justify-end",t),style:{gridColumn:`span ${a} / span ${a}`},children:e.jsxs(U,{children:[e.jsx(U.Trigger,{children:e.jsx(h,{variant:"tertiary",iconRight:e.jsx(ht,{})})}),e.jsx(U.Content,{align:"end",className:"w-fit",children:o})]})})}function Wt({label:t,className:a,action:o=!1,colSpan:s}){return e.jsx(Se,{className:j("!text-body-large",a,{"!col-span-1":o}),label:t,colSpan:s})}function Xt({children:t,isEmpty:a,isLoading:o,action:s,resource:n}){const r=K(n,s);return o||a?e.jsx("div",{className:"flex-1 bg-light-surfaceContainerLowest overflow-y-auto flex items-center justify-center",children:o?e.jsx(Ie,{}):e.jsx("span",{className:"text-light-onSurface text-body-medium",children:r?"Nenhum item encontrado":Q({resource:n,action:s})})}):e.jsx("div",{className:"flex-1 bg-light-surfaceContainerLowest overflow-y-auto",children:t})}function Zt({className:t,currentStartItem:a=1,itemsPerPage:o=it,totalItems:s,onClickPdfBtn:n,onClickSheetBtn:r,onClickNavigateBtn:i,isLoading:l,pdfBtnState:u,sheetBtnState:x,actionExportBtn:g,resourceExportBtn:p}){const m=(a-1)*o,v=s&&s<=m+o;function O(){i&&i(v?a:a+1)}function $(){i&&i(a===1?1:a-1)}return e.jsxs(H,{className:j("bg-light-tertiaryContainer rounded-b-md border-none !flex items-center gap-4 justify-end",t),gridColumns:1,children:[r&&e.jsx(h,{variant:"quaternary",label:"Exportar como planilha",iconRight:e.jsx(q,{}),onClick:r,state:l?"loading":x,resource:p,action:g}),n&&e.jsx(h,{variant:"quaternary",label:"Exportar como PDF",iconRight:e.jsx(q,{}),onClick:n,state:l?"loading":u,resource:p,action:g}),e.jsx(T,{isLoading:!!l,className:"text-light-onTertiaryContainer text-body-large",children:s&&e.jsxs(e.Fragment,{children:[`${m+1}`,`-${v?s:m+o}`,` de ${s}`]})}),e.jsx(h,{variant:"tertiary",iconLeft:e.jsx(pt,{}),onClick:$,state:l?"loading":a===1?"disabled":void 0}),e.jsx(h,{variant:"tertiary",iconLeft:e.jsx(xt,{}),onClick:O,state:l?"loading":v||!s?"disabled":void 0})]})}function Jt({onFilterCallback:t,filterBtnState:a,form:o}){const s=le();return e.jsxs(C,{...s,children:[e.jsx(C.Trigger,{children:e.jsx("div",{className:"flex justify-end",children:e.jsx(h,{variant:"secondary",label:"Filtros",iconRight:e.jsx(mt,{}),onClick:t,state:a})})}),e.jsxs(C.Content,{children:[e.jsx(C.Header,{label:"Filtros"}),o]})]})}const f=Object.assign(Vt,{Row:H,Cell:Se,Header:Kt,Head:Wt,Body:Xt,Footer:Zt,Filter:Jt,Action:Qt});function Yt(t){const a=[];for(const o of t.data)a.push({...o,cellPhone:at(o==null?void 0:o.cellPhone,"cellphone")});return{total:t.total,data:a}}function D(){const t=c.useContext(ze);if(!t)throw new Error("useGlobalContext must be used within a GlobalProvider");return t}function ea(){const{usersFilter:t,handleUsersFilter:a}=D(),{closeDialog:o}=ce();function s(n){a({page:1,...n}),o()}return e.jsx(ot,{schema:st,onSubmit:s,className:"flex-1 flex flex-col",defaultValues:{fullName:(t==null?void 0:t.fullName)||"",orderBy:(t==null?void 0:t.orderBy)||"fullName",status:(t==null?void 0:t.status)||"active"},removeEmptyString:!1,children:e.jsx(ta,{})})}function ta(){const{reset:t}=nt(),{handleUsersFilter:a}=D(),{closeDialog:o}=ce();function s(){a(I),t(I),o()}return e.jsxs(e.Fragment,{children:[e.jsxs(C.Body,{className:"flex flex-col gap-4",children:[e.jsx("span",{className:"text-label-medium text-light-onSurface",children:"Buscar por"}),e.jsx(rt,{name:"fullName",label:"Nome completo"}),e.jsx("span",{className:"text-label-medium text-light-onSurface",children:"Ordenar por"}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs(y,{name:"orderBy",hideErrorLabel:!0,children:[e.jsx(y.Radio,{label:"Nome",value:"fullName"}),e.jsx(y.Radio,{label:"Email",value:"email"})]})}),e.jsx("span",{className:"text-label-medium text-light-onSurface",children:"Status"}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs(y,{name:"status",hideErrorLabel:!0,children:[e.jsx(y.Radio,{label:"Ativo",value:"active"}),e.jsx(y.Radio,{label:"Inativo",value:"inactive"})]})})]}),e.jsx(C.Footer,{primaryLabel:"Aplicar",secondaryLabel:"Limpar",onSecondaryCallback:s,dirty:!0})]})}const aa=c.memo(ea);function G(t){const a=t,o=[];for(const n in a)a[n]&&(Array.isArray(a[n])?a[n].length&&o.push(`${n}=${a[n].join(",")}`):o.push(`${n}=${a[n]}`));return o.join("&")}function oa({fullName:t,userId:a,isActive:o,handleDisableUserInfo:s}){const n=te(),{safeFetch:r}=B(),{showSuccessSnackbar:i}=L(),l=ae();async function u(){await r(`${R}/user/${a}`,{method:"DELETE",body:{isActive:!0},resource:"USERS",action:"DELETE"})}const{mutate:x,isPending:g}=F({mutationFn:u,onSuccess:()=>{l.invalidateQueries({queryKey:["user"]}),i({title:`Usuário ${t} ativado com sucesso`})}});return o?e.jsxs(e.Fragment,{children:[e.jsx(h,{variant:"tertiary",fullWidth:!0,label:"Editar",onClick:()=>n(`/users/edit/${a}`),resource:"USERS",action:"UPDATE"}),e.jsx(h,{variant:"tertiary",fullWidth:!0,label:"Desativar",onClick:()=>s({userName:t,userId:a}),resource:"USERS",action:"DELETE"})]}):e.jsx(h,{variant:"tertiary",fullWidth:!0,label:"Ativar",onClick:x,state:g?"loading":void 0,resource:"USERS",action:"DELETE"})}function sa({userId:t,userName:a,...o}){const{safeFetch:s}=B(),{showSuccessSnackbar:n}=L(),r=ae(),{handleUsersFilter:i}=D();async function l(){await s(`${R}/user/${t}`,{method:"DELETE",body:{isActive:!1},resource:"USERS",action:"DELETE"})}const{mutate:u,isPending:x}=F({mutationFn:l,onSuccess:()=>{i({page:1}),r.invalidateQueries({queryKey:["user"]}),n({title:`Usuário ${a} desativado com sucesso`}),o.closeDialog()}});return e.jsxs(A,{...o,children:[e.jsx(A.Header,{title:"Desativar usuário"}),e.jsx(A.Body,{children:e.jsxs("span",{className:"text-body-medium text-light-onSurface",children:["Tem certeza que deseja desativar o usuário",e.jsxs("span",{className:"font-bold",children:[qe,a]}),"? Ao desativar ele não poderá mais acessar o sistema"]})}),e.jsx(A.Footer,{labelPrimaryBtn:"Desativar",onClickPrimaryBtn:u,primaryBtnState:x?"loading":"red",primaryBtResource:"USERS",primaryBtnAction:"DELETE"})]})}function na(t){switch(t){case"pdf":return"pdf";case"sheet":return"xlsx"}}async function V({data:t,fileName:a,type:o}){const s=await t.blob(),n=window.URL.createObjectURL(s),r=document.createElement("a");r.href=n,r.download=`${a}.${na(o)}`,document.body.appendChild(r),r.click(),document.body.removeChild(r)}function ra(){const[t,a]=c.useState({userName:"",userId:""}),o=le(),{safeFetch:s}=B(),{usersFilter:n,handleUsersFilter:r}=D();function i(d){o.openDialog(),a(d)}function l(d){r({page:d})}const u=c.useMemo(()=>n?G(n):"",[n]),x=c.useMemo(()=>n?G({fullName:n.fullName,status:n.status,orderBy:n.orderBy}):"",[n]);async function g(d){return await s(`${R}/user?${d}`,{resource:"USERS",action:"READ"})}const{data:p,isFetching:m}=W({queryKey:["user",u],queryFn:({queryKey:d})=>g(d[1]),select:Yt}),{showSuccessSnackbar:v}=L();async function O(){return await s(`${R}/user/pdf?${x}`,{method:"GET",resource:"USERS",action:"READ",isExport:!0})}const{mutate:$,isPending:Re}=F({mutationFn:O,onSuccess:d=>{v({title:"PDF gerado com sucesso",actionLabel:"Baixar",onActionClick:async()=>{V({data:d,fileName:"users",type:"pdf"})},actionBtnResource:"USERS",actionBtnAction:"READ"})}});async function we(){return await s(`${R}/user/sheet?${x}`,{method:"GET",resource:"USERS",action:"READ",isExport:!0})}const{mutate:Ae,isPending:Fe}=F({mutationFn:we,onSuccess:d=>{v({title:"Planilha gerada com sucesso",actionLabel:"Baixar",onActionClick:async()=>{V({data:d,fileName:"users",type:"sheet"})},actionBtnResource:"USERS",actionBtnAction:"READ"})}});return e.jsxs(e.Fragment,{children:[e.jsx(sa,{...t,...o}),e.jsx(f.Filter,{form:e.jsx(aa,{})}),e.jsxs(f,{children:[e.jsxs(f.Header,{children:[e.jsx(f.Head,{label:"ID"}),e.jsx(f.Head,{label:"Nome completo"}),e.jsx(f.Head,{label:"Email"}),e.jsx(f.Head,{label:"Celular"}),e.jsx(f.Head,{label:"Status"}),e.jsx(f.Head,{action:!0})]}),e.jsx(f.Body,{isLoading:m,isEmpty:!(p!=null&&p.total),resource:"USERS",action:"READ",children:p==null?void 0:p.data.map(d=>e.jsxs(f.Row,{children:[e.jsx(f.Cell,{label:d.id}),e.jsx(f.Cell,{label:d.fullName}),e.jsx(f.Cell,{label:d.email}),e.jsx(f.Cell,{label:d.cellPhone}),e.jsx(f.Cell,{label:d.isActive?"Ativo":"Inativo"}),e.jsx(f.Action,{children:e.jsx(oa,{isActive:d.isActive,userId:d.id,fullName:d.fullName,handleDisableUserInfo:i})})]},d.id))}),e.jsx(f.Footer,{currentStartItem:n==null?void 0:n.page,totalItems:p==null?void 0:p.total,onClickNavigateBtn:l,onClickPdfBtn:$,onClickSheetBtn:Ae,pdfBtnState:Re?"loading":void 0,sheetBtnState:Fe?"loading":void 0,isLoading:m,resourceExportBtn:"USERS",actionExportBtn:"READ"})]})]})}function ia(){const t=te();return e.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[e.jsx(Ge,{title:"Usuários",primaryButtonLabel:"Adicionar usuário",onClickPrimaryBtn:()=>t("/users/new"),primaryBtnIconRigth:e.jsx(dt,{}),primaryBtnResource:"USERS",primaryBtnAction:"CREATE"}),e.jsx(ft,{}),e.jsx(ra,{})]})}function pa(){return e.jsx(ct,{children:e.jsx(ia,{})})}export{pa as default};
