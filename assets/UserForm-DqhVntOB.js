import{s as Ct,k as Et,r as a,t as jt,v as Fe,w as ye,j as n,P as T,x as Ke,y as wt,R as St,z as Pt,A as K,C as X,D as Ue,E as Be,F as kt,G as Rt,H as Nt,J as Ft,K as At,c as V,b as Ve,L as Y,B as U,S as It,M as Ot,h as He,i as Ge,o as Ae,N as Dt,T as _t,O as Mt,l as Tt,m as Lt,g as $t,Q as qt,U as Kt}from"./index-aVBDU0Ve.js";import{i as Ut,j as Bt,R as Vt,P as Ht,O as Gt,b as zt,g as ze,k as Wt,l as Qt,m as Jt,E as Xt,I as M,u as Yt,h as re,e as Zt,F as er,n as tr}from"./Dialog-DJzmwurf.js";import{P as rr,C as ue}from"./Choice-CQV22enN.js";/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],ar=Ct("Search",nr);function mn(e,r){const t=Et(),s=t.getQueryCache();return a.useSyncExternalStore(a.useCallback(o=>s.subscribe(jt.batchCalls(o)),[s]),()=>t.isFetching(e),()=>t.isFetching(e))}var de=0;function or(){a.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Ie()),document.body.insertAdjacentElement("beforeend",e[1]??Ie()),de++,()=>{de===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),de--}},[])}function Ie(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var fe="focusScope.autoFocusOnMount",pe="focusScope.autoFocusOnUnmount",Oe={bubbles:!1,cancelable:!0},sr="FocusScope",We=a.forwardRef((e,r)=>{const{loop:t=!1,trapped:s=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...u}=e,[c,v]=a.useState(null),d=Fe(o),p=Fe(i),h=a.useRef(null),g=ye(r,C=>v(C)),x=a.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;a.useEffect(()=>{if(s){let C=function(F){if(x.paused||!c)return;const y=F.target;c.contains(y)?h.current=y:L(h.current,{select:!0})},j=function(F){if(x.paused||!c)return;const y=F.relatedTarget;y!==null&&(c.contains(y)||L(h.current,{select:!0}))},w=function(F){if(document.activeElement===document.body)for(const R of F)R.removedNodes.length>0&&L(c)};document.addEventListener("focusin",C),document.addEventListener("focusout",j);const _=new MutationObserver(w);return c&&_.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",j),_.disconnect()}}},[s,c,x.paused]),a.useEffect(()=>{if(c){_e.add(x);const C=document.activeElement;if(!c.contains(C)){const w=new CustomEvent(fe,Oe);c.addEventListener(fe,d),c.dispatchEvent(w),w.defaultPrevented||(lr(fr(Qe(c)),{select:!0}),document.activeElement===C&&L(c))}return()=>{c.removeEventListener(fe,d),setTimeout(()=>{const w=new CustomEvent(pe,Oe);c.addEventListener(pe,p),c.dispatchEvent(w),w.defaultPrevented||L(C??document.body,{select:!0}),c.removeEventListener(pe,p),_e.remove(x)},0)}}},[c,d,p,x]);const k=a.useCallback(C=>{if(!t&&!s||x.paused)return;const j=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,w=document.activeElement;if(j&&w){const _=C.currentTarget,[F,y]=ir(_);F&&y?!C.shiftKey&&w===y?(C.preventDefault(),t&&L(F,{select:!0})):C.shiftKey&&w===F&&(C.preventDefault(),t&&L(y,{select:!0})):w===_&&C.preventDefault()}},[t,s,x.paused]);return n.jsx(T.div,{tabIndex:-1,...u,ref:g,onKeyDown:k})});We.displayName=sr;function lr(e,{select:r=!1}={}){const t=document.activeElement;for(const s of e)if(L(s,{select:r}),document.activeElement!==t)return}function ir(e){const r=Qe(e),t=De(r,e),s=De(r.reverse(),e);return[t,s]}function Qe(e){const r=[],t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const o=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||o?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)r.push(t.currentNode);return r}function De(e,r){for(const t of e)if(!cr(t,{upTo:r}))return t}function cr(e,{upTo:r}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(r!==void 0&&e===r)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function ur(e){return e instanceof HTMLInputElement&&"select"in e}function L(e,{select:r=!1}={}){if(e&&e.focus){const t=document.activeElement;e.focus({preventScroll:!0}),e!==t&&ur(e)&&r&&e.select()}}var _e=dr();function dr(){let e=[];return{add(r){const t=e[0];r!==t&&(t==null||t.pause()),e=Me(e,r),e.unshift(r)},remove(r){var t;e=Me(e,r),(t=e[0])==null||t.resume()}}}function Me(e,r){const t=[...e],s=t.indexOf(r);return s!==-1&&t.splice(s,1),t}function fr(e){return e.filter(r=>r.tagName!=="A")}var Ce="Popover",[Je,vn]=Pt(Ce,[Ke]),Z=Ke(),[pr,q]=Je(Ce),Xe=e=>{const{__scopePopover:r,children:t,open:s,defaultOpen:o,onOpenChange:i,modal:u=!1}=e,c=Z(r),v=a.useRef(null),[d,p]=a.useState(!1),[h=!1,g]=wt({prop:s,defaultProp:o,onChange:i});return n.jsx(St,{...c,children:n.jsx(pr,{scope:r,contentId:K(),triggerRef:v,open:h,onOpenChange:g,onOpenToggle:a.useCallback(()=>g(x=>!x),[g]),hasCustomAnchor:d,onCustomAnchorAdd:a.useCallback(()=>p(!0),[]),onCustomAnchorRemove:a.useCallback(()=>p(!1),[]),modal:u,children:t})})};Xe.displayName=Ce;var Ye="PopoverAnchor",mr=a.forwardRef((e,r)=>{const{__scopePopover:t,...s}=e,o=q(Ye,t),i=Z(t),{onCustomAnchorAdd:u,onCustomAnchorRemove:c}=o;return a.useEffect(()=>(u(),()=>c()),[u,c]),n.jsx(Ue,{...i,...s,ref:r})});mr.displayName=Ye;var Ze="PopoverTrigger",et=a.forwardRef((e,r)=>{const{__scopePopover:t,...s}=e,o=q(Ze,t),i=Z(t),u=ye(r,o.triggerRef),c=n.jsx(T.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":ot(o.open),...s,ref:u,onClick:X(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?c:n.jsx(Ue,{asChild:!0,...i,children:c})});et.displayName=Ze;var Ee="PopoverPortal",[vr,hr]=Je(Ee,{forceMount:void 0}),tt=e=>{const{__scopePopover:r,forceMount:t,children:s,container:o}=e,i=q(Ee,r);return n.jsx(vr,{scope:r,forceMount:t,children:n.jsx(Be,{present:t||i.open,children:n.jsx(kt,{asChild:!0,container:o,children:s})})})};tt.displayName=Ee;var W="PopoverContent",rt=a.forwardRef((e,r)=>{const t=hr(W,e.__scopePopover),{forceMount:s=t.forceMount,...o}=e,i=q(W,e.__scopePopover);return n.jsx(Be,{present:s||i.open,children:i.modal?n.jsx(gr,{...o,ref:r}):n.jsx(xr,{...o,ref:r})})});rt.displayName=W;var gr=a.forwardRef((e,r)=>{const t=q(W,e.__scopePopover),s=a.useRef(null),o=ye(r,s),i=a.useRef(!1);return a.useEffect(()=>{const u=s.current;if(u)return Ut(u)},[]),n.jsx(Bt,{as:Rt,allowPinchZoom:!0,children:n.jsx(nt,{...e,ref:o,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:X(e.onCloseAutoFocus,u=>{var c;u.preventDefault(),i.current||(c=t.triggerRef.current)==null||c.focus()}),onPointerDownOutside:X(e.onPointerDownOutside,u=>{const c=u.detail.originalEvent,v=c.button===0&&c.ctrlKey===!0,d=c.button===2||v;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:X(e.onFocusOutside,u=>u.preventDefault(),{checkForDefaultPrevented:!1})})})}),xr=a.forwardRef((e,r)=>{const t=q(W,e.__scopePopover),s=a.useRef(!1),o=a.useRef(!1);return n.jsx(nt,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var u,c;(u=e.onCloseAutoFocus)==null||u.call(e,i),i.defaultPrevented||(s.current||(c=t.triggerRef.current)==null||c.focus(),i.preventDefault()),s.current=!1,o.current=!1},onInteractOutside:i=>{var v,d;(v=e.onInteractOutside)==null||v.call(e,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const u=i.target;((d=t.triggerRef.current)==null?void 0:d.contains(u))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),nt=a.forwardRef((e,r)=>{const{__scopePopover:t,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:u,onEscapeKeyDown:c,onPointerDownOutside:v,onFocusOutside:d,onInteractOutside:p,...h}=e,g=q(W,t),x=Z(t);return or(),n.jsx(We,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:o,onUnmountAutoFocus:i,children:n.jsx(Nt,{asChild:!0,disableOutsidePointerEvents:u,onInteractOutside:p,onEscapeKeyDown:c,onPointerDownOutside:v,onFocusOutside:d,onDismiss:()=>g.onOpenChange(!1),children:n.jsx(Ft,{"data-state":ot(g.open),role:"dialog",id:g.contentId,...x,...h,ref:r,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),at="PopoverClose",br=a.forwardRef((e,r)=>{const{__scopePopover:t,...s}=e,o=q(at,t);return n.jsx(T.button,{type:"button",...s,ref:r,onClick:X(e.onClick,()=>o.onOpenChange(!1))})});br.displayName=at;var yr="PopoverArrow",Cr=a.forwardRef((e,r)=>{const{__scopePopover:t,...s}=e,o=Z(t);return n.jsx(At,{...o,...s,ref:r})});Cr.displayName=yr;function ot(e){return e?"open":"closed"}var Er=Xe,jr=et,wr=tt,st=rt;const Sr=Er,Pr=jr,lt=a.forwardRef(({className:e,align:r="center",sideOffset:t=4,...s},o)=>n.jsx(wr,{children:n.jsx(st,{ref:o,align:r,sideOffset:t,className:V("z-50 w-72 rounded-md border border-neutral-200 bg-white p-4 text-neutral-950 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-neutral-800 dark:bg-neutral-950 dark:text-neutral-50",e),...s})}));lt.displayName=st.displayName;function kr({children:e,onOpenChange:r,open:t}){return n.jsx(Sr,{open:t,onOpenChange:r,children:e})}function Rr({children:e,className:r,...t}){return n.jsx(lt,{className:Ve("bg-white",r),...t,onOpenAutoFocus:s=>s.preventDefault(),children:e})}function Nr({children:e}){return n.jsx(Pr,{asChild:!0,children:e})}const me=Object.assign(kr,{Content:Rr,Trigger:Nr});var Te=1,Fr=.9,Ar=.8,Ir=.17,ve=.1,he=.999,Or=.9999,Dr=.99,_r=/[\\\/_+.#"@\[\(\{&]/,Mr=/[\\\/_+.#"@\[\(\{&]/g,Tr=/[\s-]/,it=/[\s-]/g;function xe(e,r,t,s,o,i,u){if(i===r.length)return o===e.length?Te:Dr;var c=`${o},${i}`;if(u[c]!==void 0)return u[c];for(var v=s.charAt(i),d=t.indexOf(v,o),p=0,h,g,x,k;d>=0;)h=xe(e,r,t,s,d+1,i+1,u),h>p&&(d===o?h*=Te:_r.test(e.charAt(d-1))?(h*=Ar,x=e.slice(o,d-1).match(Mr),x&&o>0&&(h*=Math.pow(he,x.length))):Tr.test(e.charAt(d-1))?(h*=Fr,k=e.slice(o,d-1).match(it),k&&o>0&&(h*=Math.pow(he,k.length))):(h*=Ir,o>0&&(h*=Math.pow(he,d-o))),e.charAt(d)!==r.charAt(i)&&(h*=Or)),(h<ve&&t.charAt(d-1)===s.charAt(i+1)||s.charAt(i+1)===s.charAt(i)&&t.charAt(d-1)!==s.charAt(i))&&(g=xe(e,r,t,s,d+1,i+2,u),g*ve>h&&(h=g*ve)),h>p&&(p=h),d=t.indexOf(v,d+1);return u[c]=p,p}function Le(e){return e.toLowerCase().replace(it," ")}function Lr(e,r,t){return e=t&&t.length>0?`${e+" "+t.join(" ")}`:e,xe(e,r,Le(e),Le(r),0,0,{})}var J='[cmdk-group=""]',ge='[cmdk-group-items=""]',$r='[cmdk-group-heading=""]',ct='[cmdk-item=""]',$e=`${ct}:not([aria-disabled="true"])`,be="cmdk-item-select",G="data-value",qr=(e,r,t)=>Lr(e,r,t),ut=a.createContext(void 0),ee=()=>a.useContext(ut),dt=a.createContext(void 0),je=()=>a.useContext(dt),ft=a.createContext(void 0),pt=a.forwardRef((e,r)=>{let t=z(()=>{var l,m;return{search:"",value:(m=(l=e.value)!=null?l:e.defaultValue)!=null?m:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=z(()=>new Set),o=z(()=>new Map),i=z(()=>new Map),u=z(()=>new Set),c=mt(e),{label:v,children:d,value:p,onValueChange:h,filter:g,shouldFilter:x,loop:k,disablePointerSelection:C=!1,vimBindings:j=!0,...w}=e,_=K(),F=K(),y=K(),R=a.useRef(null),P=Xr();B(()=>{if(p!==void 0){let l=p.trim();t.current.value=l,A.emit()}},[p]),B(()=>{P(6,Se)},[]);let A=a.useMemo(()=>({subscribe:l=>(u.current.add(l),()=>u.current.delete(l)),snapshot:()=>t.current,setState:(l,m,b)=>{var f,E,S,O;if(!Object.is(t.current[l],m)){if(t.current[l]=m,l==="search")le(),oe(),P(1,se);else if(l==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let N=document.getElementById(y);N?N.focus():(f=document.getElementById(_))==null||f.focus()}if(P(7,()=>{var N;t.current.selectedItemId=(N=H())==null?void 0:N.id,A.emit()}),b||P(5,Se),((E=c.current)==null?void 0:E.value)!==void 0){let N=m??"";(O=(S=c.current).onValueChange)==null||O.call(S,N);return}}A.emit()}},emit:()=>{u.current.forEach(l=>l())}}),[]),ae=a.useMemo(()=>({value:(l,m,b)=>{var f;m!==((f=i.current.get(l))==null?void 0:f.value)&&(i.current.set(l,{value:m,keywords:b}),t.current.filtered.items.set(l,we(m,b)),P(2,()=>{oe(),A.emit()}))},item:(l,m)=>(s.current.add(l),m&&(o.current.has(m)?o.current.get(m).add(l):o.current.set(m,new Set([l]))),P(3,()=>{le(),oe(),t.current.value||se(),A.emit()}),()=>{i.current.delete(l),s.current.delete(l),t.current.filtered.items.delete(l);let b=H();P(4,()=>{le(),(b==null?void 0:b.getAttribute("id"))===l&&se(),A.emit()})}),group:l=>(o.current.has(l)||o.current.set(l,new Set),()=>{i.current.delete(l),o.current.delete(l)}),filter:()=>c.current.shouldFilter,label:v||e["aria-label"],getDisablePointerSelection:()=>c.current.disablePointerSelection,listId:_,inputId:y,labelId:F,listInnerRef:R}),[]);function we(l,m){var b,f;let E=(f=(b=c.current)==null?void 0:b.filter)!=null?f:qr;return l?E(l,t.current.search,m):0}function oe(){if(!t.current.search||c.current.shouldFilter===!1)return;let l=t.current.filtered.items,m=[];t.current.filtered.groups.forEach(f=>{let E=o.current.get(f),S=0;E.forEach(O=>{let N=l.get(O);S=Math.max(N,S)}),m.push([f,S])});let b=R.current;Q().sort((f,E)=>{var S,O;let N=f.getAttribute("id"),te=E.getAttribute("id");return((S=l.get(te))!=null?S:0)-((O=l.get(N))!=null?O:0)}).forEach(f=>{let E=f.closest(ge);E?E.appendChild(f.parentElement===E?f:f.closest(`${ge} > *`)):b.appendChild(f.parentElement===b?f:f.closest(`${ge} > *`))}),m.sort((f,E)=>E[1]-f[1]).forEach(f=>{var E;let S=(E=R.current)==null?void 0:E.querySelector(`${J}[${G}="${encodeURIComponent(f[0])}"]`);S==null||S.parentElement.appendChild(S)})}function se(){let l=Q().find(b=>b.getAttribute("aria-disabled")!=="true"),m=l==null?void 0:l.getAttribute(G);A.setState("value",m||void 0)}function le(){var l,m,b,f;if(!t.current.search||c.current.shouldFilter===!1){t.current.filtered.count=s.current.size;return}t.current.filtered.groups=new Set;let E=0;for(let S of s.current){let O=(m=(l=i.current.get(S))==null?void 0:l.value)!=null?m:"",N=(f=(b=i.current.get(S))==null?void 0:b.keywords)!=null?f:[],te=we(O,N);t.current.filtered.items.set(S,te),te>0&&E++}for(let[S,O]of o.current)for(let N of O)if(t.current.filtered.items.get(N)>0){t.current.filtered.groups.add(S);break}t.current.filtered.count=E}function Se(){var l,m,b;let f=H();f&&(((l=f.parentElement)==null?void 0:l.firstChild)===f&&((b=(m=f.closest(J))==null?void 0:m.querySelector($r))==null||b.scrollIntoView({block:"nearest"})),f.scrollIntoView({block:"nearest"}))}function H(){var l;return(l=R.current)==null?void 0:l.querySelector(`${ct}[aria-selected="true"]`)}function Q(){var l;return Array.from(((l=R.current)==null?void 0:l.querySelectorAll($e))||[])}function ie(l){let m=Q()[l];m&&A.setState("value",m.getAttribute(G))}function ce(l){var m;let b=H(),f=Q(),E=f.findIndex(O=>O===b),S=f[E+l];(m=c.current)!=null&&m.loop&&(S=E+l<0?f[f.length-1]:E+l===f.length?f[0]:f[E+l]),S&&A.setState("value",S.getAttribute(G))}function Pe(l){let m=H(),b=m==null?void 0:m.closest(J),f;for(;b&&!f;)b=l>0?Qr(b,J):Jr(b,J),f=b==null?void 0:b.querySelector($e);f?A.setState("value",f.getAttribute(G)):ce(l)}let ke=()=>ie(Q().length-1),Re=l=>{l.preventDefault(),l.metaKey?ke():l.altKey?Pe(1):ce(1)},Ne=l=>{l.preventDefault(),l.metaKey?ie(0):l.altKey?Pe(-1):ce(-1)};return a.createElement(T.div,{ref:r,tabIndex:-1,...w,"cmdk-root":"",onKeyDown:l=>{var m;(m=w.onKeyDown)==null||m.call(w,l);let b=l.nativeEvent.isComposing||l.keyCode===229;if(!(l.defaultPrevented||b))switch(l.key){case"n":case"j":{j&&l.ctrlKey&&Re(l);break}case"ArrowDown":{Re(l);break}case"p":case"k":{j&&l.ctrlKey&&Ne(l);break}case"ArrowUp":{Ne(l);break}case"Home":{l.preventDefault(),ie(0);break}case"End":{l.preventDefault(),ke();break}case"Enter":{l.preventDefault();let f=H();if(f){let E=new Event(be);f.dispatchEvent(E)}}}}},a.createElement("label",{"cmdk-label":"",htmlFor:ae.inputId,id:ae.labelId,style:Zr},v),ne(e,l=>a.createElement(dt.Provider,{value:A},a.createElement(ut.Provider,{value:ae},l))))}),Kr=a.forwardRef((e,r)=>{var t,s;let o=K(),i=a.useRef(null),u=a.useContext(ft),c=ee(),v=mt(e),d=(s=(t=v.current)==null?void 0:t.forceMount)!=null?s:u==null?void 0:u.forceMount;B(()=>{if(!d)return c.item(o,u==null?void 0:u.id)},[d]);let p=vt(o,i,[e.value,e.children,i],e.keywords),h=je(),g=$(P=>P.value&&P.value===p.current),x=$(P=>d||c.filter()===!1?!0:P.search?P.filtered.items.get(o)>0:!0);a.useEffect(()=>{let P=i.current;if(!(!P||e.disabled))return P.addEventListener(be,k),()=>P.removeEventListener(be,k)},[x,e.onSelect,e.disabled]);function k(){var P,A;C(),(A=(P=v.current).onSelect)==null||A.call(P,p.current)}function C(){h.setState("value",p.current,!0)}if(!x)return null;let{disabled:j,value:w,onSelect:_,forceMount:F,keywords:y,...R}=e;return a.createElement(T.div,{ref:Y(i,r),...R,id:o,"cmdk-item":"",role:"option","aria-disabled":!!j,"aria-selected":!!g,"data-disabled":!!j,"data-selected":!!g,onPointerMove:j||c.getDisablePointerSelection()?void 0:C,onClick:j?void 0:k},e.children)}),Ur=a.forwardRef((e,r)=>{let{heading:t,children:s,forceMount:o,...i}=e,u=K(),c=a.useRef(null),v=a.useRef(null),d=K(),p=ee(),h=$(x=>o||p.filter()===!1?!0:x.search?x.filtered.groups.has(u):!0);B(()=>p.group(u),[]),vt(u,c,[e.value,e.heading,v]);let g=a.useMemo(()=>({id:u,forceMount:o}),[o]);return a.createElement(T.div,{ref:Y(c,r),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},t&&a.createElement("div",{ref:v,"cmdk-group-heading":"","aria-hidden":!0,id:d},t),ne(e,x=>a.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?d:void 0},a.createElement(ft.Provider,{value:g},x))))}),Br=a.forwardRef((e,r)=>{let{alwaysRender:t,...s}=e,o=a.useRef(null),i=$(u=>!u.search);return!t&&!i?null:a.createElement(T.div,{ref:Y(o,r),...s,"cmdk-separator":"",role:"separator"})}),Vr=a.forwardRef((e,r)=>{let{onValueChange:t,...s}=e,o=e.value!=null,i=je(),u=$(d=>d.search),c=$(d=>d.selectedItemId),v=ee();return a.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),a.createElement(T.input,{ref:r,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":v.listId,"aria-labelledby":v.labelId,"aria-activedescendant":c,id:v.inputId,type:"text",value:o?e.value:u,onChange:d=>{o||i.setState("search",d.target.value),t==null||t(d.target.value)}})}),Hr=a.forwardRef((e,r)=>{let{children:t,label:s="Suggestions",...o}=e,i=a.useRef(null),u=a.useRef(null),c=$(d=>d.selectedItemId),v=ee();return a.useEffect(()=>{if(u.current&&i.current){let d=u.current,p=i.current,h,g=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let x=d.offsetHeight;p.style.setProperty("--cmdk-list-height",x.toFixed(1)+"px")})});return g.observe(d),()=>{cancelAnimationFrame(h),g.unobserve(d)}}},[]),a.createElement(T.div,{ref:Y(i,r),...o,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":c,"aria-label":s,id:v.listId},ne(e,d=>a.createElement("div",{ref:Y(u,v.listInnerRef),"cmdk-list-sizer":""},d)))}),Gr=a.forwardRef((e,r)=>{let{open:t,onOpenChange:s,overlayClassName:o,contentClassName:i,container:u,...c}=e;return a.createElement(Vt,{open:t,onOpenChange:s},a.createElement(Ht,{container:u},a.createElement(Gt,{"cmdk-overlay":"",className:o}),a.createElement(zt,{"aria-label":e.label,"cmdk-dialog":"",className:i},a.createElement(pt,{ref:r,...c}))))}),zr=a.forwardRef((e,r)=>$(t=>t.filtered.count===0)?a.createElement(T.div,{ref:r,...e,"cmdk-empty":"",role:"presentation"}):null),Wr=a.forwardRef((e,r)=>{let{progress:t,children:s,label:o="Loading...",...i}=e;return a.createElement(T.div,{ref:r,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},ne(e,u=>a.createElement("div",{"aria-hidden":!0},u)))}),I=Object.assign(pt,{List:Hr,Item:Kr,Input:Vr,Group:Ur,Separator:Br,Dialog:Gr,Empty:zr,Loading:Wr});function Qr(e,r){let t=e.nextElementSibling;for(;t;){if(t.matches(r))return t;t=t.nextElementSibling}}function Jr(e,r){let t=e.previousElementSibling;for(;t;){if(t.matches(r))return t;t=t.previousElementSibling}}function mt(e){let r=a.useRef(e);return B(()=>{r.current=e}),r}var B=typeof window>"u"?a.useEffect:a.useLayoutEffect;function z(e){let r=a.useRef();return r.current===void 0&&(r.current=e()),r}function $(e){let r=je(),t=()=>e(r.snapshot());return a.useSyncExternalStore(r.subscribe,t,t)}function vt(e,r,t,s=[]){let o=a.useRef(),i=ee();return B(()=>{var u;let c=(()=>{var d;for(let p of t){if(typeof p=="string")return p.trim();if(typeof p=="object"&&"current"in p)return p.current?(d=p.current.textContent)==null?void 0:d.trim():o.current}})(),v=s.map(d=>d.trim());i.value(e,c,v),(u=r.current)==null||u.setAttribute(G,c),o.current=c}),o}var Xr=()=>{let[e,r]=a.useState(),t=z(()=>new Map);return B(()=>{t.current.forEach(s=>s()),t.current=new Map},[e]),(s,o)=>{t.current.set(s,o),r({})}};function Yr(e){let r=e.type;return typeof r=="function"?r(e.props):"render"in r?r.render(e.props):e}function ne({asChild:e,children:r},t){return e&&a.isValidElement(r)?a.cloneElement(Yr(r),{ref:r.ref},t(r.props.children)):t(r)}var Zr={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const ht=a.forwardRef(({className:e,...r},t)=>n.jsx(I,{ref:t,className:V("flex h-full w-full flex-col overflow-hidden rounded-md bg-white text-neutral-950 dark:bg-neutral-950 dark:text-neutral-50",e),...r}));ht.displayName=I.displayName;const gt=a.forwardRef(({className:e,...r},t)=>n.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[n.jsx(ar,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),n.jsx(I.Input,{ref:t,className:V("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-neutral-500 disabled:cursor-not-allowed disabled:opacity-50 dark:placeholder:text-neutral-400",e),...r})]}));gt.displayName=I.Input.displayName;const xt=a.forwardRef(({className:e,...r},t)=>n.jsx(I.List,{ref:t,className:V("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...r}));xt.displayName=I.List.displayName;const bt=a.forwardRef((e,r)=>n.jsx(I.Empty,{ref:r,className:"py-6 text-center text-sm",...e}));bt.displayName=I.Empty.displayName;const en=a.forwardRef(({className:e,...r},t)=>n.jsx(I.Group,{ref:t,className:V("overflow-hidden p-1 text-neutral-950 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-neutral-500 dark:text-neutral-50 dark:[&_[cmdk-group-heading]]:text-neutral-400",e),...r}));en.displayName=I.Group.displayName;const tn=a.forwardRef(({className:e,...r},t)=>n.jsx(I.Separator,{ref:t,className:V("-mx-1 h-px bg-neutral-200 dark:bg-neutral-800",e),...r}));tn.displayName=I.Separator.displayName;const yt=a.forwardRef(({className:e,...r},t)=>n.jsx(I.Item,{ref:t,className:V("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-neutral-100 data-[selected=true]:text-neutral-900 data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 dark:data-[selected='true']:bg-neutral-800 dark:data-[selected=true]:text-neutral-50",e),...r}));yt.displayName=I.Item.displayName;function qe({options:e,name:r,disabled:t,loading:s=!1,hideErrorLabel:o,label:i,required:u=!1,onChange:c}){var C;const[v,d]=a.useState(!1),{register:p,control:h}=ze(),{errors:g}=Wt({name:r}),{field:x}=Qt({name:r,control:h}),k=Jt({name:r});return a.useEffect(()=>{t&&d(!1)},[t]),n.jsxs("label",{className:"flex flex-col",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-body-medium text-neutral-700 p-1",children:i}),u&&n.jsx("span",{className:"text-red-500 text-body-medium",children:"*"})]}),n.jsxs(me,{open:v,onOpenChange:d,children:[n.jsx(me.Trigger,{children:n.jsx(U,{variant:"secondary",label:k&&((C=e.find(j=>j.value===k))==null?void 0:C.label)||"Selecione um item",iconRight:"UnfoldMore",fullWidth:!0,state:t?"disabled":s?"loading":void 0,className:"!h-10"})}),o||n.jsx(Xt,{errors:g,name:r}),n.jsx(me.Content,{align:"start",className:"!p-2",children:n.jsxs(ht,{children:[n.jsx(gt,{placeholder:"Pesquise",autoFocus:!0,className:"text-body-medium text-neutral-700"}),n.jsx(xt,{...p(r),children:s?n.jsx("div",{className:"flex items-center justify-center p-2",children:n.jsx(It,{})}):n.jsxs(n.Fragment,{children:[n.jsx(bt,{className:"text-neutral-700 flex items-center justify-center p-2 text-body-medium",children:"Nenhum item encontrado"}),e.map(j=>n.jsxs(yt,{value:j.value,onSelect:w=>{if(c==null||c(w),w===k){x.onChange("");return}x.onChange(w)},className:"flex !text-neutral-700",keywords:[j.label],children:[n.jsx("span",{className:"flex-1",children:j.label}),k===j.value&&n.jsx(Ot,{iconName:"Check"})]},j.value))]})})]})})]})]})}function rn({defaultOpen:e=!1}){const[r,t]=a.useState(""),[s,o]=a.useState(e),{setValue:i,trigger:u,getValues:c,watch:v}=ze(),{safeFetch:d}=He(),{showErrorSnackbar:p}=Ge();async function h(y){return await d(`https://viacep.com.br/ws/${y}/json/`,{enableCookie:!1})}const{data:g,isFetching:x}=Ae({queryKey:["cepApi",r],queryFn:({queryKey:y})=>h(y[1]),enabled:!!r});a.useEffect(()=>{if(g!=null&&g.erro){p({description:"CEP não encontrado"});return}g&&(i("address.street",g.logradouro,{shouldDirty:!0}),i("address.neighborhood",g.bairro,{shouldDirty:!0}),i("address.city",g.ibge,{shouldDirty:!0}),i("address.state",g.uf,{shouldDirty:!0}))},[g,i,p]);async function k(y){return y?await d(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${y}/municipios`,{enableCookie:!1}):[]}const C=v("address.state"),{data:j,isFetching:w}=Ae({queryKey:["ibgeApi",C],queryFn:({queryKey:y})=>k(y[1]),enabled:!!C,select:y=>y==null?void 0:y.map(R=>({value:String(R.id),label:R.nome}))});async function _(){if(await u("address.cep")){const R=c("address.cep");t(R)}}function F(y){y.key==="Enter"&&(y.preventDefault(),_())}return s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex items-center justify-end col-span-full",children:n.jsx(_t,{content:"Remover endereço",children:n.jsx(U,{variant:"quaternary",iconLeft:"Delete",onClick:()=>{o(!1),i("address",null,{shouldDirty:!0})}})})}),n.jsxs("div",{className:"flex items-center justify-between gap-1",onKeyDown:F,children:[n.jsx(M,{label:"CEP",name:"address.cep",mask:"cep",maxLength:9,required:!0,forceUnselect:!0}),n.jsx(U,{variant:"quaternary",label:"Preencher automaticamente",onClick:_,padding:"none",state:x?"loading":void 0})]}),n.jsx(M,{label:"Número",name:"address.number",required:!0}),n.jsx(M,{label:"Rua",name:"address.street"}),n.jsx(M,{label:"Bairro",name:"address.neighborhood"}),n.jsx(qe,{label:"Estado",name:"address.state",options:Mt,onChange:()=>i("address.city","",{shouldDirty:!0})}),n.jsx(qe,{label:"Cidade",name:"address.city",options:j||[],loading:w,disabled:!C}),n.jsx(M,{label:"Complemento",name:"address.complement"})]}):n.jsx("div",{className:"col-span-full",children:n.jsx(U,{variant:"secondary",label:"Adicionar endereço",onClick:()=>{o(!0),i("address",Dt,{shouldDirty:!0})},fullWidth:!0,textAlign:"center"})})}function nn({children:e}){return n.jsx("div",{className:"flex flex-col gap-4 w-[56rem]",children:e})}function an({children:e}){return n.jsx("div",{className:"rounded-md overflow-hidden",children:e})}function on({title:e}){return n.jsx("div",{className:"p-4",children:n.jsx("span",{className:"text-body-large text-neutral-700 font-bold",children:e})})}function sn({children:e,className:r}){return n.jsx("div",{className:Ve("p-4 grid grid-cols-2 gap-4",r),children:e})}const D=Object.assign(nn,{Group:an,Header:on,Body:sn});function ln({primaryBtnState:e,dirty:r,children:t}){const s=Yt({dirty:r,buttonState:e}),[o,...i]=a.Children.toArray(t);return n.jsxs("div",{className:"w-full py-4 flex justify-end gap-4",children:[a.cloneElement(o,{state:s,type:"submit"}),i]})}function cn({...e}){const{safeFetch:r}=He(),{showSuccessSnackbar:t}=Ge();async function s(){await r(`${Lt}/auth/request-change-password`,{method:"POST"})}const{mutate:o,isPending:i}=Tt({mutationFn:s,onSuccess:()=>{t({title:"Um email será enviado",description:"Confira também a caixa de spam"}),e.closeDialog()}});return n.jsxs(re,{...e,children:[n.jsx(re.Header,{title:"Alteração de senha"}),n.jsx(re.Body,{children:"Caso deseje alterar a senha, clique no botão abaixo e siga as instruções enviadas para seu email"}),n.jsx(re.Footer,{labelSecondaryBtn:"Cancelar",onClickPrimaryBtn:o,labelPrimaryBtn:"Solicitar alteração",onClickSecondaryBtn:e.closeDialog,primaryBtnState:i?"loading":void 0})]})}const un=-1;function hn({defaultValues:e,onSubmit:r,isPending:t,headerTitle:s,isEdit:o=!1,resource:i,action:u,allowEditRole:c=!1,allowChangePassword:v=!1}){const d=$t(),p=Zt();return n.jsxs(n.Fragment,{children:[n.jsx(cn,{...p}),n.jsx("div",{className:"flex flex-col gap-4 w-full",children:n.jsxs(er,{schema:tr,defaultValues:e,onSubmit:r,className:"gap-4 flex flex-col flex-1",onlyDirty:o,children:[n.jsx(rr,{title:s}),n.jsx("div",{className:"flex justify-center flex-1",children:n.jsxs(D,{children:[n.jsxs(D.Group,{children:[n.jsx(D.Header,{title:"Dados"}),n.jsxs(D.Body,{children:[n.jsx(M,{name:"fullName",label:"Nome completo",required:!0,autoFocus:!0}),n.jsx(M,{name:"email",label:"Email",required:!0,disabled:o,type:"email"}),n.jsx(M,{name:"cellPhone",label:"Celular",mask:"cellphone",maxLength:15,type:"tel"}),n.jsx(M,{name:"cpf",label:"CPF",mask:"cpf",maxLength:14}),n.jsx(M,{name:"code",label:"Matrícula"}),n.jsx(M,{name:"birthDate",label:"Data de nascimento",type:"date"})]})]}),n.jsxs(D.Group,{children:[n.jsx(D.Header,{title:"Endereço"}),n.jsx(D.Body,{children:n.jsx(rn,{defaultOpen:!!e.address})})]}),c&&n.jsxs(D.Group,{children:[n.jsx(D.Header,{title:"Categoria"}),n.jsx(D.Body,{children:n.jsxs(ue,{name:"roleId",children:[n.jsx(ue.Radio,{label:"Administrador",value:qt}),n.jsx(ue.Radio,{label:"Vendedor",value:Kt})]})})]}),v&&n.jsxs(D.Group,{children:[n.jsx(D.Header,{title:"Segurança"}),n.jsx(D.Body,{children:n.jsx(U,{label:"Alterar senha",onClick:()=>p.openDialog()})})]})]})}),n.jsxs(ln,{primaryBtnState:t?"loading":void 0,dirty:!0,children:[n.jsx(U,{color:"lightBlue",iconRight:"Save",label:"Salvar",resource:i,action:u}),n.jsx(U,{color:"red",iconRight:"Close",label:"Cancelar",onClick:()=>d(un)})]})]})})]})}export{hn as U,mn as u};
