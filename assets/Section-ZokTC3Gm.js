import{x as p,r as u,K as v,v as w,w as S,a as F,j as t,B as h,n as E}from"./index-DpCb8Zub.js";import{b as k,I as c}from"./index-BT4GbdeD.js";import{L as q}from"./Loading-IUelIp8A.js";function $(e,a){const r=p(),o=r.getQueryCache();return u.useSyncExternalStore(u.useCallback(i=>o.subscribe(v.batchCalls(i)),[o]),()=>r.isFetching(e),()=>r.isFetching(e))}function s(e,a){return a?`${a}.${e}`:e}function O({inputNamePrefix:e,autoFocus:a=!1}){const[r,o]=u.useState(""),{setValue:i,trigger:g,getValues:f}=k(),{safeFetch:b}=w(),{showErrorSnackbar:m}=S();async function d(){if(await g(s("cep",e))){const C=f(s("cep",e));o(C)}}async function x(l){return await b(`https://viacep.com.br/ws/${l}/json/`,{enableCookie:!1})}const{data:n,isFetching:y}=F({queryKey:["cepApi",r],queryFn:({queryKey:l})=>x(l[1]),enabled:!!r});u.useEffect(()=>{if(n!=null&&n.erro){m({description:"CEP não encontrado"});return}n&&(i(s("street",e),n.logradouro,{shouldDirty:!0}),i(s("neighborhood",e),n.bairro,{shouldDirty:!0}),i(s("city",e),n.localidade,{shouldDirty:!0}),i(s("state",e),n.uf,{shouldDirty:!0}))},[n,e]);function j(l){l.key==="Enter"&&(l.preventDefault(),d())}return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-between gap-1",onKeyDown:j,children:[t.jsx(c,{label:"CEP",name:s("cep",e),mask:"cep",maxLength:9,required:!0,autoFocus:a,forceUnselect:!0}),t.jsx(h,{variant:"quaternary",label:"Preencher automaticamente",onClick:d,padding:"none",state:y?"loading":void 0})]}),t.jsx(c,{label:"Número",name:s("number",e),required:!0}),t.jsx(c,{label:"Rua",name:s("street",e)}),t.jsx(c,{label:"Bairro",name:s("neighborhood",e)}),t.jsx(c,{label:"Cidade",name:s("city",e)}),t.jsx(c,{label:"Estado",name:s("state",e)}),t.jsx(c,{label:"Complemento",name:s("complement",e)})]})}function D({children:e}){return t.jsx("div",{className:"flex flex-col gap-4 w-[56rem]",children:e})}function V({children:e}){return t.jsx("div",{className:"rounded-md overflow-hidden",children:e})}function L({title:e}){return t.jsx("span",{className:"text-light-onSurface text-title-medium",children:e})}function A({title:e}){return t.jsx("div",{className:"bg-light-tertiaryContainer p-4",children:t.jsx("span",{className:"text-body-large text-light-onTertiaryContainer",children:e})})}function B({label:e,value:a,onEdit:r,isLoading:o=!1}){return t.jsxs("div",{className:"bg-light-surfaceContainerLowest p-4 border-b flex last:border-none",children:[t.jsxs("div",{className:"w-full flex items-center",children:[t.jsx("span",{className:"text-light-onSurface flex-1 text-body-large",children:e}),t.jsx(q,{className:"flex-1 text-light-onSurface text-body-large line-clamp-1",isLoading:o,children:a})]}),t.jsx(h,{variant:"quaternary",onClick:r,state:o?"loading":void 0,iconLeft:"Edit"})]})}function I({children:e,className:a}){return t.jsx("div",{className:E("bg-light-surfaceContainerLowest p-4 grid grid-cols-2 gap-4",a),children:e})}const T=Object.assign(D,{Title:L,Group:V,Header:A,Row:B,Body:I});export{O as A,T as S,$ as u};
