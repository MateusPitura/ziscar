import{u as E,c as f,i as x,b as d,w as h,n as v,r as y,d as b,j as r,z as C,e as g,E as N,a as S}from"./index-CrVTpVTI.js";import{f as V}from"./formatInstallment-CqKKrlUB.js";import{E as w}from"./ExpenseForm-BjgIZk95.js";import"./schemas-B7gcU9vp.js";import"./useButtonState-C7TXS9Jx.js";import"./FieldArray-DswNorv6.js";import"./Section-DVwlB0L5.js";import"./PaymentForm-w1UECrqX.js";import"./Select-CB-6jpCF.js";import"./dialog-Ct9-qcrh.js";import"./DataField-CmnNFbKB.js";import"./VehicleExpenseHeader-OcndBYbf.js";import"./PageHeader-DARJqnt5.js";import"./selectVehicleInfo-D5Hlg63I.js";import"./index-uyprc1Rk.js";import"./index-CLx72V5J.js";function P(){const{safeFetch:i}=E(),t=f(),a=x(),{showSuccessSnackbar:c}=d(),{pathname:n}=h(),{vehicleId:s}=v(),o=y.useMemo(()=>t.getQueryData(["vehicle",s]),[t,s]);async function u({payment:e}){const m=V({installment:e.installment,upfront:e.upfront});await i(`${g}/vehicle-expense`,{method:"POST",body:{vehicleId:s,category:e.category,observations:e.observations,competencyDate:e.competencyDate,description:`Gasto Veículo ${S(o==null?void 0:o.vehicle.plateNumber,"plateNumber")}`,paidTo:N[e.category],installments:m},resource:"VEHICLE_EXPENSE",action:"CREATE"})}const{mutate:p,isPending:l}=b({mutationFn:u,onSuccess:()=>{c({title:"Gasto criado com sucesso"}),a(n.replace("/new","")),t.invalidateQueries({queryKey:["vehicle-expenses"]}),t.invalidateQueries({queryKey:["accounts-payable"]})}});return r.jsx(w,{defaultValues:C,onSubmit:p,isPending:l,headerTitle:"Novo Gasto do Veículo",resource:"VEHICLE_EXPENSE",action:"CREATE",onClose:()=>a(n.replace("/new",""))})}function X(){return r.jsx(P,{})}export{X as default};
