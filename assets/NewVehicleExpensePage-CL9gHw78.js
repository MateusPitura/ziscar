import{u as E,c as f,i as x,b as d,w as h,n as v,r as y,d as b,j as r,z as C,e as g,E as N,a as S}from"./index-UdT0GBA4.js";import{f as V}from"./formatInstallment-CyhDlvcR.js";import{E as w}from"./ExpenseForm-BUo5BDET.js";import"./schemas-BggDEbt9.js";import"./useButtonState-N-GWfCKe.js";import"./FieldArray-B-TaBd7C.js";import"./Section-C42prP9c.js";import"./PaymentForm-CjHHXWrF.js";import"./Select-DxVA1XCQ.js";import"./dialog-Cf7DmMJZ.js";import"./DataField-C0EWm-gj.js";import"./VehicleExpenseHeader-CPUhpGWW.js";import"./PageHeader-BWgTwsAh.js";import"./selectVehicleInfo-DlLws49l.js";import"./index-JrfIxjTC.js";import"./index-Bc_KExWn.js";function P(){const{safeFetch:i}=E(),t=f(),a=x(),{showSuccessSnackbar:c}=d(),{pathname:n}=h(),{vehicleId:s}=v(),o=y.useMemo(()=>t.getQueryData(["vehicle",s]),[t,s]);async function u({payment:e}){const m=V({installment:e.installment,upfront:e.upfront});await i(`${g}/vehicle-expense`,{method:"POST",body:{vehicleId:s,category:e.category,observations:e.observations,competencyDate:e.competencyDate,description:`Gasto Veículo ${S(o==null?void 0:o.vehicle.plateNumber,"plateNumber")}`,paidTo:N[e.category],installments:m},resource:"VEHICLE_EXPENSE",action:"CREATE"})}const{mutate:p,isPending:l}=b({mutationFn:u,onSuccess:()=>{c({title:"Gasto criado com sucesso"}),a(n.replace("/new","")),t.invalidateQueries({queryKey:["vehicle-expenses"]}),t.invalidateQueries({queryKey:["accounts-payable"]})}});return r.jsx(w,{defaultValues:C,onSubmit:p,isPending:l,headerTitle:"Novo Gasto do Veículo",resource:"VEHICLE_EXPENSE",action:"CREATE",onClose:()=>a(n.replace("/new",""))})}function X(){return r.jsx(P,{})}export{X as default};
