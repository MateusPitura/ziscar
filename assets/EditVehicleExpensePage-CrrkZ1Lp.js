import{u as d,b as f,f as x,c as h,k as g,s as v,h as S,d as V,r as C,j as n,S as b,E as P,e as j,w as A}from"./index-DLLA1f-v.js";import{E as q}from"./ExpenseForm-DzAAaTWe.js";import"./schemas-Bhi0Dh6I.js";import"./useButtonState-3b0McXTU.js";import"./FieldArray-BBhN6Zd9.js";import"./dialog-BH6A_dKB.js";import"./Section-BgbGHRg0.js";import"./PaymentForm-0P3bM2lj.js";import"./DataField-whfLL2N4.js";import"./VehicleExpenseHeader-Dswyw1GN.js";import"./PageHeader-Bs9TDp09.js";import"./selectVehicleInfo-ycdfHdPz.js";import"./index-ORUOFCuk.js";import"./index-2Ad1AATz.js";function F(s){return{payment:{category:s.category,competencyDate:s.competencyDate,observations:s.observations,upfront:[],installment:null}}}function D(){const{safeFetch:s}=d(),{showSuccessSnackbar:c}=f(),i=x(),a=h(),{expenseId:e}=g(),{pathname:o}=v();async function u(){return{category:A.IPVA,competencyDate:"2025-01-01",id:1,observations:"Seu Jorge",totalValue:"100000",archivedAt:void 0}}const{data:t,isFetching:p}=S({queryKey:["vehicle-expense",e],queryFn:u,select:F});async function l(E){await s(`${j}/vehicle-expense/${e}`,{method:"PATCH",body:E,resource:"VEHICLE_EXPENSE",action:"UPDATE"})}const{mutate:m,isPending:y,isSuccess:r}=V({mutationFn:l,onSuccess:async()=>{t!=null&&t.payment.category&&c({title:`Gasto de ${P[t.payment.category]} atualizado com sucesso`}),a.invalidateQueries({queryKey:["vehicle-expenses"]}),a.invalidateQueries({queryKey:["accounts-payable"]}),i(o.replace(`/edit/${e}`,""))}});return C.useEffect(()=>()=>{r&&a.invalidateQueries({queryKey:["vehicle-expense",e]})},[r,a,e]),p?n.jsx("div",{className:"flex justify-center items-center h-full w-full",children:n.jsx(b,{})}):t&&n.jsx(q,{defaultValues:t,onSubmit:m,isPending:y,headerTitle:"Alterar Gasto do VeÃ­culo",isEdit:!0,resource:"VEHICLE_EXPENSE",action:"UPDATE",onClose:()=>i(o.replace(`/edit/${e}`,""))})}function X(){return n.jsx(D,{})}export{X as default};
