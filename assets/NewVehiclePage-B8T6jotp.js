import{i as d,u as x,b as v,c as g,d as C,j as e,m as S,k as o,e as b}from"./index-UdT0GBA4.js";import{F as j}from"./schemas-BggDEbt9.js";import{P as V}from"./FieldArray-B-TaBd7C.js";import{P as y}from"./PageHeader-BWgTwsAh.js";import{f as F}from"./formatInstallment-CyhDlvcR.js";import{b as P}from"./index-JrfIxjTC.js";import{V as w}from"./VehicleTabs-DMrcBxLv.js";import"./useButtonState-N-GWfCKe.js";import"./index-Bc_KExWn.js";import"./ColorPreview-DXDwjQke.js";import"./Section-C42prP9c.js";import"./PaymentForm-CjHHXWrF.js";import"./Select-DxVA1XCQ.js";import"./dialog-Cf7DmMJZ.js";import"./DataField-C0EWm-gj.js";import"./Choice-Dg5X3hHC.js";import"./selectStoresInfo-PKSV8PaO.js";import"./selectBrandsInfo-VDxn_10s.js";function E(){const a=d(),{safeFetch:r}=x(),{showSuccessSnackbar:c}=v(),s=g();async function l({vehicle:u,characteristics:i,payment:t}){const p=[...i.commonCharacteristics,...i.newCharacteristics.map(f=>f.description)],h=F({installment:t.installment,upfront:t.upfront});await r(`${b}/vehicles`,{method:"POST",body:{...u,characteristics:p,payment:{purchaseDate:t.purchaseDate,paidTo:t.paidTo,installments:h}},resource:"VEHICLES",action:"CREATE"})}const{mutate:n,isPending:m}=C({mutationFn:l,onSuccess:()=>{c({title:"Veículo criado com sucesso"}),a("/vehicles"),s.invalidateQueries({queryKey:["vehicles"]}),s.invalidateQueries({queryKey:["accounts-receivable"]})}});return e.jsx("div",{className:"flex flex-col gap-4 w-full",children:e.jsxs(j,{onSubmit:n,className:"flex-1 flex flex-col gap-4",schema:P,defaultValues:S,children:[e.jsx(y,{title:"Cadastrar veículo"}),e.jsx(w,{}),e.jsxs(V,{dirty:!0,primaryBtnState:m?"loading":void 0,children:[e.jsx(o,{color:"lightBlue",iconRight:"Save",label:"Salvar"}),e.jsx(o,{color:"red",iconRight:"Close",label:"Cancelar",onClick:()=>a("/vehicles")})]})]})})}function z(){return e.jsx(E,{})}export{z as default};
