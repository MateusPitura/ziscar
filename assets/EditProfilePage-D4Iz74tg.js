import{r as a,j as t,b as x,c as g,d as E,h as j,e as C,S,f as c}from"./index-CV0TP6Xw.js";import{U as F}from"./UserForm-DU8HdNMa.js";import{u as w}from"./useIsFetching-DbePOVqm.js";import{a as l}from"./index-D0UprIr6.js";import{s as A,p as v}from"./parseAddressToUpdate-DlCHvisg.js";import"./Choice-CIb13fO6.js";import"./AddressFields-CvTF2Vnb.js";import"./PageFooter-wK_25X2U.js";import"./PageHeader-CYamZWWv.js";import"./index-BTnMZTzr.js";import"./Dialog-D3LjZ4tr.js";const b=a.createContext(null);function q({children:e}){const[r,o]=a.useState("");function n(s){o(s)}const i=a.useMemo(()=>({example:r,handleExample:n}),[r]);return t.jsx(b.Provider,{value:i,children:e})}function U(e){return{fullName:e.fullName,email:e.email,phone:l(e.phone,"phone")??"",cpf:l(e.cpf,"cpf")??"",address:A(e.address)}}function I(){const{safeFetch:e}=x(),{showSuccessSnackbar:r}=g(),o=E(),n=w({queryKey:["cepApi"]});async function i(){return await e(`${c}/profile`)}const{data:s,isFetching:d}=j({queryKey:["profile"],queryFn:i,select:U});async function f(h){const{address:P,...y}=h,u=v({newAddress:P,oldAddress:s==null?void 0:s.address});await e(`${c}/profile`,{method:"PATCH",body:{...y,...u&&{address:u}}})}const{mutate:m,isPending:p}=C({mutationFn:f,onSuccess:async()=>{r({title:"Perfil atualizado com sucesso"}),o.invalidateQueries({queryKey:["profile"]})}});return d?t.jsx("div",{className:"flex justify-center items-center h-full w-full",children:t.jsx(S,{})}):s&&t.jsx(F,{headerTitle:"Editar minha conta",defaultValues:s,onSubmit:m,isPending:p||!!n,isEdit:!0,allowChangePassword:!0})}function L(){return t.jsx(q,{children:t.jsx(I,{})})}export{L as default};
