import{u as E,c as d,i as f,b as x,x as h,o as v,r as y,d as b,j as g,A as C,e as S,E as N,a as V}from"./index-CnY9f91V.js";import{f as P}from"./formatInstallment-DC7w0kSr.js";import{E as T}from"./ExpenseForm-nfrcXo7g.js";import"./schemas-CZyi_FYc.js";import"./useDialog-DgUnmKfd.js";import"./FieldArray-Ckm8lv6T.js";import"./Section-C_3Epz3l.js";import"./PaymentForm-C1cv7kbc.js";import"./Select-7V9bPDz1.js";import"./DataField-wmA4TIPk.js";import"./VehicleExpenseHeader-C5u0euPv.js";import"./PageHeader-nhaYMwqU.js";import"./useGetVehicleInfo-DNi_R4tO.js";import"./formatVehicleCharacteristics-BEECkIz-.js";import"./index-AykQK_Nc.js";import"./index-8LNUc8ZP.js";import"./selectVehicleInfo-COf4Uwf7.js";function $({contextHelper:i}){const{safeFetch:n}=E(),t=d(),a=f(),{showSuccessSnackbar:c}=x(),{pathname:r}=h(),{vehicleId:o}=v(),s=y.useMemo(()=>t.getQueryData(["vehicle",o]),[t,o]);async function u({payment:e}){const m=P({installment:e.installment,upfront:e.upfront});await n(`${S}/vehicle-expense`,{method:"POST",body:{vehicleId:o,category:e.category,observations:e.observations,competencyDate:e.competencyDate,description:`Gasto Veículo ${V(s==null?void 0:s.vehicle.plateNumber,"plateNumber")}`,paidTo:N[e.category],installments:m},resource:"VEHICLE_EXPENSE",action:"CREATE"})}const{mutate:p,isPending:l}=b({mutationFn:u,onSuccess:()=>{c({title:"Gasto criado com sucesso"}),a(r.replace("/new","")),t.invalidateQueries({queryKey:["vehicle-expenses"]}),t.invalidateQueries({queryKey:["accounts-payable"]})}});return g.jsx(T,{defaultValues:C,onSubmit:p,isPending:l,headerTitle:"Novo Gasto do Veículo",resource:"VEHICLE_EXPENSE",action:"CREATE",onClose:()=>a(r.replace("/new","")),contextHelper:i})}export{$ as default};
