import{b as f,c as g,e as S,j as e,f as b,a as y,l as C,m as B,B as d,P as D}from"./index-BXJS51rz.js";import{F as P,I as l}from"./schemas-C0ld1-yh.js";import{C as m}from"./Choice-qkpWSrWO.js";import{A as F}from"./AddressFields-D10D38O3.js";import{P as v}from"./PageHeader-BSFnyFeG.js";import{S as a,P as E}from"./PageFooter-LcjYvHmm.js";import{a as R}from"./index-DSxEXcC0.js";import{D as o,u as A}from"./Dialog-DA2rz_GB.js";function k({...s}){const{safeFetch:t}=f(),{showSuccessSnackbar:i}=g();async function n(){await t(`${b}/auth/request-change-password`,{method:"POST"})}const{mutate:r,isPending:c}=S({mutationFn:n,onSuccess:()=>{i({title:"Um email será enviado",description:"Confira também a caixa de spam"}),s.closeDialog()}});return e.jsxs(o,{...s,children:[e.jsx(o.Header,{title:"Alteração de senha"}),e.jsx(o.Body,{children:"Caso deseje alterar a senha, clique no botão abaixo e siga as instruções enviadas para seu email"}),e.jsx(o.Footer,{labelSecondaryBtn:"Cancelar",onClickPrimaryBtn:r,labelPrimaryBtn:"Solicitar alteração",onClickSecondaryBtn:s.closeDialog,primaryBtnState:c?"loading":void 0})]})}function G({defaultValues:s,onSubmit:t,isPending:i,headerTitle:n,isEdit:r=!1,resource:c,action:u,allowEditRole:h=!1,allowChangePassword:j=!1}){const p=y(),x=A();return e.jsxs(e.Fragment,{children:[e.jsx(k,{...x}),e.jsx("div",{className:"flex flex-col gap-4 w-full",children:e.jsxs(P,{schema:R,defaultValues:s,onSubmit:t,className:"gap-4 flex flex-col flex-1",onlyDirty:r,children:[e.jsx(v,{title:n}),e.jsx("div",{className:"flex justify-center flex-1",children:e.jsxs(a,{children:[e.jsxs(a.Group,{children:[e.jsx(a.Header,{title:"Dados"}),e.jsxs(a.Body,{children:[e.jsx(l,{name:"fullName",label:"Nome completo",required:!0,autoFocus:!0}),e.jsx(l,{name:"email",label:"Email",required:!0,disabled:r,type:"email"}),e.jsx(l,{name:"phone",label:"Celular",mask:"phone",maxLength:15,type:"tel"}),e.jsx(l,{name:"cpf",label:"CPF",mask:"cpf",maxLength:14})]})]}),e.jsxs(a.Group,{children:[e.jsx(a.Header,{title:"Endereço"}),e.jsx(a.Body,{children:e.jsx(F,{})})]}),h&&e.jsxs(a.Group,{children:[e.jsx(a.Header,{title:"Categoria"}),e.jsx(a.Body,{children:e.jsxs(m,{children:[e.jsx(m.Radio,{name:"roleId",label:"Administrador",value:String(C)}),e.jsx(m.Radio,{name:"roleId",label:"Vendedor",value:String(B)})]})})]}),j&&e.jsxs(a.Group,{children:[e.jsx(a.Header,{title:"Segurança"}),e.jsx(a.Body,{children:e.jsx(d,{"data-cy":"request-change-password-button",label:"Alterar senha",onClick:()=>x.openDialog()})})]})]})}),e.jsxs(E,{primaryBtnState:i?"loading":void 0,dirty:!0,children:[e.jsx(d,{color:"lightBlue",iconRight:"Save",label:"Salvar",resource:c,action:u}),e.jsx(d,{color:"red",iconRight:"Close",label:"Cancelar",onClick:()=>p(D)})]})]})})]})}export{G as U};
