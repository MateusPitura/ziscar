import{r as a,j as t,h as x,i as g,k as E,s as C,l as j,S,m as u}from"./index-Ch3bubzI.js";import{U as F}from"./UserForm-DgJbaBZX.js";import{u as w}from"./useIsFetching-aSquAk6R.js";import{d as c}from"./schemas-Cd82lAeS.js";import{s as A,p as v}from"./parseAddressPayload--LgIBwYN.js";import"./Choice-BI-6q2Kf.js";import"./PageFooter-CEkJ7fPp.js";import"./Dialog-rg_VNm6h.js";const q=a.createContext(null);function b({children:e}){const[r,n]=a.useState("");function o(s){n(s)}const i=a.useMemo(()=>({example:r,handleExample:o}),[r]);return t.jsx(q.Provider,{value:i,children:e})}function k(e){return{fullName:e.fullName,email:e.email,phone:c(e.phone,"phone")??"",cpf:c(e.cpf,"cpf")??"",address:A(e.address)}}function I(){const{safeFetch:e}=x(),{showSuccessSnackbar:r}=g(),n=E(),o=w({queryKey:["cepApi"]});async function i(){return await e(`${u}/profile`)}const{data:s,isFetching:d}=C({queryKey:["profile"],queryFn:i,select:k});async function f(P){const{address:h,...y}=P,l=v({newAddress:h,oldAddress:s==null?void 0:s.address});console.log("ðŸŒ  C"),await e(`${u}/profile`,{method:"PATCH",body:{...y,...l&&{address:l}}})}const{mutate:m,isPending:p}=j({mutationFn:f,onSuccess:async()=>{r({title:"Perfil atualizado com sucesso"}),n.invalidateQueries({queryKey:["profile"]})}});return d?t.jsx("div",{className:"flex justify-center items-center h-full w-full",children:t.jsx(S,{})}):s&&t.jsx(F,{headerTitle:"Editar minha conta",defaultValues:s,onSubmit:m,isPending:p||!!o,isEdit:!0,allowChangePassword:!0})}function $(){return t.jsx(b,{children:t.jsx(I,{})})}export{$ as default};
