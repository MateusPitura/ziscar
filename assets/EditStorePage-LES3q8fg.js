import{a,u as A,b as g,i as x,c as F,n as P,f as T,d as q,r as C,j as r,S as R,e as c}from"./index-CrVTpVTI.js";import{u as b}from"./useIsFetching-Dh2N-bBa.js";import{s as v,p as w}from"./parseAddressToUpdate-D-oUqR3S.js";import{S as K}from"./StoreForm-kdxDn-EH.js";import"./schemas-B7gcU9vp.js";import"./useButtonState-C7TXS9Jx.js";import"./AddressFields-DlZGQI2J.js";import"./FieldArray-DswNorv6.js";import"./Select-CB-6jpCF.js";import"./dialog-Ct9-qcrh.js";import"./PageHeader-DARJqnt5.js";import"./Section-DVwlB0L5.js";import"./index-hFX5y6l5.js";import"./index-CLx72V5J.js";function $(e){return{name:e.name,email:e.email??"",phone:a(e.phone,"phone")??"",cnpj:a(e.cnpj,"cnpj")??"",address:v(e.address)}}function I(){const{safeFetch:e}=A(),{showSuccessSnackbar:u}=g(),d=b({queryKey:["cepApi"]}),m=x(),o=F(),{storeId:t}=P();async function p(){return await e(`${c}/store/${t}`,{resource:"STORES",action:"READ"})}const{data:s,isFetching:l}=T({queryKey:["store",t],queryFn:p,select:$});async function f(h){const{address:E,...j}=h,i=w({newAddress:E,oldAddress:s==null?void 0:s.address});await e(`${c}/store/${t}`,{method:"PATCH",body:{...j,...i&&{address:i}},resource:"STORES",action:"UPDATE"})}const{mutate:S,isPending:y,isSuccess:n}=q({mutationFn:f,onSuccess:async()=>{u({title:`Loja ${s==null?void 0:s.name} atualizada com sucesso`}),o.invalidateQueries({queryKey:["stores"]}),m("/stores")}});return C.useEffect(()=>()=>{n&&o.invalidateQueries({queryKey:["store",t]})},[n,o,t]),l?r.jsx("div",{className:"flex justify-center items-center h-full w-full",children:r.jsx(R,{})}):s&&r.jsx(K,{defaultValues:s,onSubmit:S,isPending:y||!!d,headerTitle:"Alterar usu√°rio",isEdit:!0,resource:"STORES",action:"UPDATE"})}function J(){return r.jsx(I,{})}export{J as default};
