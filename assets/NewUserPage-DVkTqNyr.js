import{r as n,j as s,u as f,a as x,b as E,e as S,c as U,A as C,d as g}from"./index-CwQymCQa.js";import{u as h}from"./useIsFetching-DbLUeXt5.js";import{U as v}from"./UserForm-B5-rgUjE.js";import{p as y}from"./parseAddressToCreate-D-7d1H4W.js";import"./schemas-BL4SC9at.js";import"./Choice-DMQtnXq8.js";import"./AddressFields-CckxNv15.js";import"./Select-D2QyUKl8.js";import"./FieldArray-BwK9nGym.js";import"./PageHeader-ciO4E3wM.js";import"./index-B72T8EHL.js";import"./index-DTctZbkD.js";import"./PageFooter-BC-TFmMj.js";import"./DialogContext-qdOZWBM2.js";import"./Dialog-D_sfX160.js";const P=n.createContext(null);function w({children:t}){const[e,r]=n.useState("");function a(i){r(i)}const o=n.useMemo(()=>({example:e,handleExample:a}),[e]);return s.jsx(P.Provider,{value:o,children:t})}function A(){const{safeFetch:t}=f(),{showSuccessSnackbar:e}=x(),r=h({queryKey:["cepApi"]}),a=E(),o=S();async function i(m){const{address:d,...p}=m,l=y({address:d});await t(`${g}/user`,{method:"POST",body:{...p,address:l},resource:"USERS",action:"CREATE"})}const{mutate:u,isPending:c}=U({mutationFn:i,onSuccess:()=>{e({title:"Um email será enviado",description:"Confira também a caixa de spam"}),o("/users"),a.invalidateQueries({queryKey:["users"]})}});return s.jsx(v,{defaultValues:C,onSubmit:u,isPending:c||!!r,headerTitle:"Novo usuário",resource:"USERS",action:"CREATE",allowEditRole:!0})}function I(){return s.jsx(w,{children:s.jsx(A,{})})}export{I as default};
