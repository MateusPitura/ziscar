import{u as f,b as g,d as S,j as e,e as b,f as y,P as C,Q as B,g as d}from"./index-CDuUmDit.js";import{F as D,I as o}from"./schemas-CxmGnStq.js";import{C as m}from"./Choice-D6VCytWq.js";import{A as F}from"./AddressFields-DHRsRoOs.js";import{P as v}from"./PageHeader-B5SIBKuZ.js";import{S as a}from"./Section-Dx5LZFIe.js";import{D as l}from"./Dialog-BW0_p7Tw.js";import{a as P}from"./index-DrVvxuUh.js";import{P as E}from"./FieldArray-Dw98_Trr.js";import{u as R}from"./DialogContext-28MRl5PT.js";function k({...s}){const{safeFetch:t}=f(),{showSuccessSnackbar:i}=g();async function n(){await t(`${b}/auth/request-change-password`,{method:"POST"})}const{mutate:r,isPending:c}=S({mutationFn:n,onSuccess:()=>{i({title:"Um email será enviado",description:"Confira também a caixa de spam"}),s.closeDialog()}});return e.jsxs(l,{...s,children:[e.jsx(l.Header,{title:"Alteração de senha"}),e.jsx(l.Body,{children:"Caso deseje alterar a senha, clique no botão abaixo e siga as instruções enviadas para seu email"}),e.jsx(l.Footer,{labelSecondaryBtn:"Cancelar",onClickPrimaryBtn:r,labelPrimaryBtn:"Solicitar alteração",onClickSecondaryBtn:s.closeDialog,primaryBtnState:c?"loading":void 0})]})}function M({defaultValues:s,onSubmit:t,isPending:i,headerTitle:n,isEdit:r=!1,resource:c,action:x,allowEditRole:h=!1,allowChangePassword:j=!1}){const p=y(),u=R();return e.jsxs(e.Fragment,{children:[e.jsx(k,{...u}),e.jsx("div",{className:"flex flex-col gap-4 w-full",children:e.jsxs(D,{schema:P,defaultValues:s,onSubmit:t,className:"gap-4 flex flex-col flex-1",onlyDirty:r,children:[e.jsx(v,{title:n}),e.jsx("div",{className:"flex justify-center flex-1",children:e.jsxs(a,{children:[e.jsxs(a.Group,{children:[e.jsx(a.Header,{title:"Dados"}),e.jsxs(a.Body,{children:[e.jsx(o,{name:"fullName",label:"Nome completo",required:!0,autoFocus:!0}),e.jsx(o,{name:"email",label:"Email",required:!0,disabled:r,type:"email"}),e.jsx(o,{name:"phone",label:"Celular",mask:"phone",maxLength:15,type:"tel"}),e.jsx(o,{name:"cpf",label:"CPF",mask:"cpf",maxLength:14})]})]}),e.jsxs(a.Group,{children:[e.jsx(a.Header,{title:"Endereço"}),e.jsx(a.Body,{children:e.jsx(F,{})})]}),h&&e.jsxs(a.Group,{children:[e.jsx(a.Header,{title:"Categoria"}),e.jsx(a.Body,{children:e.jsxs(m,{children:[e.jsx(m.Radio,{name:"roleId",label:"Administrador",value:String(C)}),e.jsx(m.Radio,{name:"roleId",label:"Vendedor",value:String(B)})]})})]}),j&&e.jsxs(a.Group,{children:[e.jsx(a.Header,{title:"Segurança"}),e.jsx(a.Body,{children:e.jsx(d,{"data-cy":"request-change-password-button",label:"Alterar senha",onClick:()=>u.openDialog()})})]})]})}),e.jsxs(E,{primaryBtnState:i?"loading":void 0,dirty:!0,children:[e.jsx(d,{color:"lightBlue",iconRight:"Save",label:"Salvar",resource:c,action:x}),e.jsx(d,{color:"red",iconRight:"Close",label:"Cancelar",onClick:()=>p("/users")})]})]})})]})}export{M as U};
