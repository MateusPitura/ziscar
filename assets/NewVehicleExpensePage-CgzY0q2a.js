import{u as E,c as f,i as x,b as d,w as h,n as v,r as y,d as b,j as r,z as C,e as g,E as N,a as S}from"./index-C8Hi2I9-.js";import{f as V}from"./formatInstallment-CrDG1pmT.js";import{E as w}from"./ExpenseForm-DdCCbplx.js";import"./schemas-ARZMo_di.js";import"./useButtonState-D8nv53KZ.js";import"./FieldArray-CybTVLLQ.js";import"./Section-BPNV-L4z.js";import"./PaymentForm-7RTJENqF.js";import"./Select-DaT4dAtZ.js";import"./dialog-DBF6ydzz.js";import"./DataField-CDqrsgkO.js";import"./VehicleExpenseHeader-DqogTx2-.js";import"./PageHeader-C3bsmlao.js";import"./selectVehicleInfo-6C27XIza.js";import"./index-CziveuU3.js";import"./index-Bn3msv5N.js";function P(){const{safeFetch:i}=E(),t=f(),a=x(),{showSuccessSnackbar:c}=d(),{pathname:n}=h(),{vehicleId:s}=v(),o=y.useMemo(()=>t.getQueryData(["vehicle",s]),[t,s]);async function u({payment:e}){const m=V({installment:e.installment,upfront:e.upfront});await i(`${g}/vehicle-expense`,{method:"POST",body:{vehicleId:s,category:e.category,observations:e.observations,competencyDate:e.competencyDate,description:`Gasto Veículo ${S(o==null?void 0:o.vehicle.plateNumber,"plateNumber")}`,paidTo:N[e.category],installments:m},resource:"VEHICLE_EXPENSE",action:"CREATE"})}const{mutate:p,isPending:l}=b({mutationFn:u,onSuccess:()=>{c({title:"Gasto criado com sucesso"}),a(n.replace("/new","")),t.invalidateQueries({queryKey:["vehicle-expenses"]}),t.invalidateQueries({queryKey:["accounts-payable"]})}});return r.jsx(w,{defaultValues:C,onSubmit:p,isPending:l,headerTitle:"Novo Gasto do Veículo",resource:"VEHICLE_EXPENSE",action:"CREATE",onClose:()=>a(n.replace("/new",""))})}function X(){return r.jsx(P,{})}export{X as default};
