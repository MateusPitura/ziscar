import{u as E,c as d,i as f,b as x,x as h,o as v,r as y,d as b,j as g,A as C,e as S,E as N,a as V}from"./index-DmwSkqVz.js";import{f as P}from"./formatInstallment-peSgM6Lp.js";import{E as T}from"./ExpenseForm-B0U19WLz.js";import"./schemas-CDh-Ls0x.js";import"./useDialog-B87cicjl.js";import"./FieldArray-CccZHlDo.js";import"./Section-VDDmVTvE.js";import"./PaymentForm-DH7xm03D.js";import"./Select-BCdmGCll.js";import"./DataField-DRgQT-TI.js";import"./VehicleExpenseHeader-CBcOEWG9.js";import"./PageHeader-CS70jJr4.js";import"./useGetVehicleInfo-DiMc9crB.js";import"./formatVehicleCharacteristics-BEECkIz-.js";import"./index-CUlM27kl.js";import"./index-fjEarVAD.js";import"./selectVehicleInfo-Dtb3vDk-.js";function $({contextHelper:i}){const{safeFetch:n}=E(),t=d(),a=f(),{showSuccessSnackbar:c}=x(),{pathname:r}=h(),{vehicleId:o}=v(),s=y.useMemo(()=>t.getQueryData(["vehicle",o]),[t,o]);async function u({payment:e}){const m=P({installment:e.installment,upfront:e.upfront});await n(`${S}/vehicle-expense`,{method:"POST",body:{vehicleId:o,category:e.category,observations:e.observations,competencyDate:e.competencyDate,description:`Gasto Veículo ${V(s==null?void 0:s.vehicle.plateNumber,"plateNumber")}`,paidTo:N[e.category],installments:m},resource:"VEHICLE_EXPENSE",action:"CREATE"})}const{mutate:p,isPending:l}=b({mutationFn:u,onSuccess:()=>{c({title:"Gasto criado com sucesso"}),a(r.replace("/new","")),t.invalidateQueries({queryKey:["vehicle-expenses"]}),t.invalidateQueries({queryKey:["accounts-payable"]})}});return g.jsx(T,{defaultValues:C,onSubmit:p,isPending:l,headerTitle:"Novo Gasto do Veículo",resource:"VEHICLE_EXPENSE",action:"CREATE",onClose:()=>a(r.replace("/new","")),contextHelper:i})}export{$ as default};
