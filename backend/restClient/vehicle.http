### Get Vehicle Brands
GET {{BACKEND_URL}}/vehicles/brands HTTP/1.1
Content-Type: application/json

### Search Vehicles (with all filters)
GET {{BACKEND_URL}}/vehicles?page=1&limit=10&storeId=1&brandId=1&status=IN_STOCK&category=CAR&modelYear=2023&yearOfManufacture=2022&modelName=Civic&plateNumber=ABC1234&announcedPriceMin=50000&announcedPriceMax=100000&startDate=2025-01-01&endDate=2025-12-31 HTTP/1.1
Content-Type: application/json

### Search Vehicles (minimal filters)
GET {{BACKEND_URL}}/vehicles?page=1&limit=10&status=INACTIVE&plateNumber=PJW HTTP/1.1
Content-Type: application/json

### Get Vehicle by ID
GET {{BACKEND_URL}}/vehicles/31 HTTP/1.1
Content-Type: application/json

### Create Vehicle (complete)
POST {{BACKEND_URL}}/vehicles HTTP/1.1
Content-Type: application/json

{
  "chassiNumber": "1HGBH41JXMN23456",
  "modelYear": 2023,
  "yearOfManufacture": 2022,
  "modelName": "Civic EXL",
  "brandId": 1,
  "category": "CAR",
  "kilometers": 15000,
  "plateNumber": "ABC1233",
  "announcedPrice": 85000,
  "minimumPrice": 80000,
  "commissionValue": 5000,
  "color": "000000",
  "fuelType": "FLEX",
  "status": "IN_STOCK",
  "storeId": 1,
  "characteristics": ["Ar condicionado", "Direção hidráulica"],
  "payment": {
    "purchaseDate": "2023-08-01T00:00:00.000Z",
    "paidTo": "Fornecedor ABC",
    "installments": [
      {
        "installmentSequence": 1,
        "dueDate": "2023-09-01T00:00:00.000Z",
        "value": 85000,
        "isUpfront": true,
        "paymentMethods": [
          {
            "type": "BANK_SLIP",
            "value": 85000,
            "paymentDate": "2023-08-01T00:00:00.000Z"
          }
        ]
      }
    ]
  }
}

### Create Vehicle (minimal)
POST {{BACKEND_URL}}/vehicles HTTP/1.1
Content-Type: application/json

{
  "chassiNumber": "2HGBH41JXMN109187",
  "brandId": 1,
  "plateNumber": "XYZ5678",
  "announcedPrice": null,
  "minimumPrice": null,
  "commissionValue": 2000,
  "color": null,
  "fuelType": null,
  "status": "PURCHASED",
  "storeId": 1
}

### Create Vehicle (with installments)
POST {{BACKEND_URL}}/vehicles HTTP/1.1
Content-Type: application/json

{
  "chassiNumber": "3HGBH41JXMN109185",
  "modelYear": 2024,
  "yearOfManufacture": 2023,
  "modelName": "Corolla XEi",
  "brandId": 2,
  "category": "CAR",
  "kilometers": 0,
  "plateNumber": "DEF9394",
  "announcedPrice": 120000,
  "minimumPrice": 115000,
  "commissionValue": 6000,
  "color": "FFFFFF",
  "fuelType": "FLEX",
  "status": "IN_STOCK",
  "storeId": 1,
  "characteristics": ["Ar condicionado digital", "Câmera de ré"],
  "payment": {
    "purchaseDate": "2024-01-15T00:00:00.000Z",
    "paidTo": "Concessionária XYZ",
    "installments": [
      {
        "installmentSequence": 0,
        "dueDate": "2024-02-15T00:00:00.000Z",
        "value": 40000,
        "isUpfront": true,
        "paymentMethods": [
          {
            "type": "PIX",
            "value": 40000,
            "paymentDate": "2024-01-15T00:00:00.000Z"
          }
        ]
      },
      {
        "installmentSequence": 1,
        "dueDate": "2024-03-15T00:00:00.000Z",
        "value": 40000,
        "isUpfront": false,
        "paymentMethods": null
      },
      {
        "installmentSequence": 2,
        "dueDate": "2024-04-15T00:00:00.000Z",
        "value": 40000,
        "isUpfront": false,
        "paymentMethods": null
      }
    ]
  }
}

### Update Vehicle (partial)
PATCH {{BACKEND_URL}}/vehicles/31 HTTP/1.1
Content-Type: application/json

{
  "modelYear": 2024,
  "announcedPrice": 90000,
  "minimumPrice": 85000,
  "status": "IN_STOCK",
  "kilometers": 18000,
  "payment": {
    "paidTo": null
  }
}

### Update Vehicle (with characteristics)
PATCH {{BACKEND_URL}}/vehicles/37 HTTP/1.1
Content-Type: application/json

{
  "modelName": "Civic EXL Updated",
  "announcedPrice": 95000,
  "characteristics": ["Ar condicionado", "Direção hidráulica", "Nova característica"]
}

### Update Vehicle Payment
PATCH {{BACKEND_URL}}/vehicles/37 HTTP/1.1
Content-Type: application/json

{
  "payment": {
    "purchaseDate": "2023-08-15T00:00:00.000Z",
    "paidTo": "Leilão"
  }
}

### Update Vehicle Payment (only paidTo)
PATCH {{BACKEND_URL}}/vehicles/37 HTTP/1.1
Content-Type: application/json

{
  "payment": {
    "paidTo": "Concessionária XYZ"
  }
}

### Update Vehicle Payment (only purchaseDate)
PATCH {{BACKEND_URL}}/vehicles/37 HTTP/1.1
Content-Type: application/json

{
  "payment": {
    "purchaseDate": "2023-09-01T00:00:00.000Z"
  }
}

### Archive Vehicle
PATCH {{BACKEND_URL}}/vehicles/1/archive HTTP/1.1
Content-Type: application/json

### Unarchive Vehicle
PATCH {{BACKEND_URL}}/vehicles/1/unarchive HTTP/1.1
Content-Type: application/json

### Insert Vehicle Expense (maintenance)
POST {{BACKEND_URL}}/vehicle-expense HTTP/1.1
Content-Type: application/json

{
  "vehicleId": 1,
  "category": "MAINTENANCE",
  "observations": "Troca de óleo e filtros",
  "description": "Manutenção preventiva completa",
  "paidTo": "Oficina do João",
  "competencyDate": "2025-08-15T00:00:00.000Z",
  "installments": [
    {
      "installmentSequence": 1,
      "dueDate": "2025-08-15T00:00:00.000Z",
      "value": 25000,
      "isUpfront": true,
      "paymentMethods": [
        {
          "type": "PIX",
          "value": 25000,
          "paymentDate": "2025-08-12T00:00:00.000Z"
        }
      ]
    },
    {
      "installmentSequence": 2,
      "dueDate": "2025-09-15T00:00:00.000Z",
      "value": 25000,
      "isUpfront": false,
      "paymentMethods": null
    }
  ]
}

### Insert Vehicle Expense (Multa)
POST {{BACKEND_URL}}/vehicle-expense HTTP/1.1
Content-Type: application/json

{
  "vehicleId": 31,
  "category": "FINE",
  "observations": null,
  "description": "Multa por excesso de velocidade",
  "paidTo": "Detran",
  "competencyDate": "2025-02-15T00:00:00.000Z",
  "installments": [
    {
      "installmentSequence": 0,
      "dueDate": "2025-02-15T00:00:00.000Z",
      "value": 50000,
      "isUpfront": false,
      "paymentMethods": [
        {
          "type": "PIX",
          "value": 50000,
          "paymentDate": "2025-02-10T00:00:00.000Z"
        }
      ]
    }
  ]
}

### Make Vehicle Sale (installments)
POST {{BACKEND_URL}}/vehicles/sale HTTP/1.1
Content-Type: application/json

{
  "vehicleId": 31,
  "customerId": 1,
  "date": "2025-08-12T00:00:00.000Z",
  "commissionValue": 5000,
  "accountReceivable": {
    "description": "Venda do veículo ABC-1234",
    "receivedFrom": "Cliente João"
  },
  "installments": [
    {
      "installmentSequence": 0,
      "dueDate": "2025-09-12T00:00:00.000Z",
      "value": 47500,
      "isUpfront": true,
      "paymentMethods": [
        {
          "type": "PIX",
          "value": 47500,
          "paymentDate": "2025-08-12T00:00:00.000Z"
        }
      ]
    },
    {
      "installmentSequence": 0,
      "dueDate": "2025-10-12T00:00:00.000Z",
      "value": 47500,
      "isUpfront": false,
      "paymentMethods": null
    }
  ]
}

### Make Vehicle Sale (full payment)
POST {{BACKEND_URL}}/vehicles/sale HTTP/1.1
Content-Type: application/json

{
  "vehicleId": 31,
  "customerId": 1,
  "date": "2025-08-16T00:00:00.000Z",
  "commissionValue": 0,
  "accountReceivable": {
    "description": "Venda à vista",
    "receivedFrom": "Cliente Maria"
  },
  "installments": [
    {
      "installmentSequence": 0,
      "dueDate": "2025-08-16T00:00:00.000Z",
      "value": 70000,
      "isUpfront": true,
      "paymentMethods": [
        {
          "type": "BANK_SLIP",
          "value": 70000,
          "paymentDate": "2025-08-16T00:00:00.000Z"
        }
      ]
    }
  ]
}

### Get Vehicle Sale by ID
GET {{BACKEND_URL}}/vehicles/sale/7 HTTP/1.1
Content-Type: application/json

### Get Vehicle Expenses by Vehicle ID
GET {{BACKEND_URL}}/vehicle-expense/1 HTTP/1.1
Content-Type: application/json

### Get Vehicle Expense by ID
GET {{BACKEND_URL}}/vehicle-expense/detail/1 HTTP/1.1
Content-Type: application/json

### Update Vehicle Expense
PATCH {{BACKEND_URL}}/vehicle-expense/1 HTTP/1.1
Content-Type: application/json

{
  "observations": "Troca de óleo e filtros - Atualizado",
  "category": "MAINTENANCE",
  "competencyDate": "2025-08-15T00:00:00.000Z"
}

### Archive Vehicle Expense
PATCH {{BACKEND_URL}}/vehicle-expense/1/archive HTTP/1.1
Content-Type: application/json

### Unarchive Vehicle Expense
PATCH {{BACKEND_URL}}/vehicle-expense/1/unarchive HTTP/1.1
Content-Type: application/json

### ERROR CASES

### Invalid Vehicle Creation - Missing required fields
POST {{BACKEND_URL}}/vehicles HTTP/1.1
Content-Type: application/json

{
  "chassiNumber": "1HGBH41JXMN109186",
  "brandId": 1
  // Missing: plateNumber, commissionValue, status, storeId
}

### Invalid Vehicle Sale - Missing required fields
POST {{BACKEND_URL}}/vehicles/sale HTTP/1.1
Content-Type: application/json

{
  "vehicleId": 1,
  "customerId": 1,
  "date": "2025-08-12T00:00:00.000Z"
  // Missing: commissionValue, accountReceivable, installments
}